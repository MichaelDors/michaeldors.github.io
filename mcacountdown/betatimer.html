<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@600&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Castoro:ital@0;1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="icon" type="image/x-icon" href="icon.ico">
    <meta name="theme-color" content="#8426ff" />
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Countdown">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Countdown</title>

    <script src="Dependencies/confetti.js"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>

    <meta property="og:image" content="https://michaeldors.com/Images/countdowncover.jpg" />
    <meta property="og:title" content="Countdown - Michael Dors" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://michaeldors.com/mcacountdown/timer" />
    <meta property="og:description" content="A beautiful and smart countdown timer website." />
    <meta property="og:site_name" content="Michael Dors" />
    <link rel="apple-touch-icon" href="Images/countdownhomescreen.png">
</head>
<!-- Google tag (gtag.js) -->
<script>
    function getCookie(name) {
          var nameEQ = name + "=";
          var ca = document.cookie.split(';');
          for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
          }
          return null;
      }
  
  if(getCookie("cookiesAccepted")){
  var script = document.createElement('script');
  script.setAttribute("async", "");
  script.src = "https://www.googletagmanager.com/gtag/js?id=G-LCNP5E1F65";
  
  document.head.appendChild(script);
      
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-LCNP5E1F65');
      }
  </script>

<body id="body" style="background-color:#141414;  overflow-x:hidden;">
    <input onblur="setcountdowntitle('front');" id="countdowntitle" type="text" />
    <p id="clock" class="clock"></p>


    <div class="backgroundframe" id="animatedbackground">
        <div class="backgroundframe-bg">
            <img class="bg-color album-artwork" id="bg1" src="enhancedbackground_1.png" />
            <img class="bg-black album-artwork" id="bg2" src="enhancedbackground_1.png" />
        </div>
    </div>

    <div id="schedule">
        <div class="schedule-viewer" id="schedule-viewer">
            <div class="schedule-current-class" id="schedule-currentClass">
                <div class="schedule-class-title" id="schedule-classTitle"></div>
                <div class="schedule-time-remaining">
                    <div class="schedule-time" id="schedule-timeRemaining"></div>
                    <div class="schedule-remaining-text" id="schedule-remainingText">remaining</div>
                </div>
                <div class="schedule-progress-bar">
                    <div class="schedule-progress" id="schedule-progress"></div>
                </div>
            </div>
            <div class="schedule-upcoming-classes" id="schedule-upcomingClasses"></div>
        </div>
    </div>
    </div>

    <a id="gear" class="settings hidden" onclick="settings();" style="margin: 0; position: absolute; -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%); z-index:1000000;"><i id="innergear" class="fa-solid fa-gear"></i></a>


    <center id="preloader" style="margin: 0; position: absolute; top: 50%; left: 50%; -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%);">
        <video width="100" height="100" style="border-radius: 100%;" autoplay muted loop playsinline>
            <source src="Preloader.mp4" type="video/mp4">
        </video>
    </center>

    <div class="cookiebanner" id="cookie-banner">
        <img id="cookiebannerimg" src="Backgrounds/cookie_bite.png">
        <div>
            <p style="font-family:Dosis; font-size:25px;"> We use cookies and similar technologies for preferences and anonymous analytics. <a class="aintext" style="font-family:Dosis; font-size:25; color:white; text-decoration:underline" href="Information/cookiepolicy.html">Learn more</a> or <a id="accept-cookies" class="aintext" style="font-family:Dosis; font-size:25; color:#aa68ff; text-decoration:underline">accept</a>.</p>
        </div>
    </div>

    <center class="hidden" id="unfocused" style="margin: 0; position: absolute; top: 50%; left: 50%; -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%);">
        <div class="box">
            <i style="font-size:50px; color:white" class="fa-solid fa-gauge"></i>
            <h1 class="textelement">Memory Saver</h1>
            <p class="textelement">Memory Saver engaged to prevent using system resources when the window is out of focus. You can disable this in settings.</p>
            <br>
            <br>
            <a href="" class="a2"><i class="fa-solid fa-arrows-rotate"></i> Sync</a>
            <br>
            <Br>
            <br>
        </div>
    </center>



    <div class="hidden" id="settings">
        <div id="settingssidebar">
            <div style="position: relative;">
                <input type="input" list="settingsheaders" placeholder="Search for an option">
                <button type="button">Go</button>
            </div>
            <datalist id="settingsheaders">
                <option value="General"></option>
                <option value="Customization"></option>
                <option value="Schedules"></option>
                <option value="Progress"></option>
                <option value="Appearance"></option>

                <option value="Ease of Use"></option>
                <option value="Only Include"></option>

                <!--<option value="Presets/Themes"></option>-->
                <option value="Date + Time"></option>
                <option value="Title"></option>
                <option value="Link"></option>
                <option value="Only Include"></option>
                <option value="Foreground Colors"></option>
                <option value="Background"></option>
                <option value="Typeface (Font)"></option>

                <option value="Animation Speed"></option>
                <option value="Disable Confetti"></option>
                <option value="Memory Saver"></option>
                <option value="Label Countdown Units"></option>
                <option value="Only Include Weeks"></option>
                <option value="Only Include Days"></option>
                <option value="Only Include Hours"></option>
                <option value="Only Include Minutes"></option>
                <option value="Only Include Seconds"></option>
                <option value="Only Include Milliseconds"></option>
            </datalist>
            <div id="settingssidebarpaneshareable">
                <h3>Shareable</h3>
                <a class="sidebaranchor" href="#generaloptions"><i style="background-color:#8426FF" class="fa-regular fa-clock"></i> General</a>
                <Br>
                <a class="sidebaranchor" href="#customizationoptions"><i style="background-color:#00b2ff" class="fa-solid fa-palette"></i> Customization</a>
                <br>
                <a id="optionsendinganchor" class="sidebaranchor" href="#endingoptions"><i style="background-color:#00FF5E;" class="fa-solid fa-flag-checkered"></i> Ending</a>
                <br>
                <a class="sidebaranchor" href="#scheduleoptions"><i style="background-color:#FF9900" class="fa-solid fa-calendar"></i> Schedule</a>
                <br>
                <a id="optionsprogressanchor" class="sidebaranchor" href="#progressoptions"><i style="background-color:#8426FF" class="fa-solid fa-spinner"></i> Progress</a>
            </div>
            <div id="settingssidebarpanepersonal">
                <h3>Personal</h3>
                <a class="sidebaranchor" href="#appearanceoptions"><i style="background-color:#00b2ff" class="fa-solid fa-circle-half-stroke"></i> Appearance</a>
                <br>
                <a class="sidebaranchor" href="#eouoptions"><i style="background-color:#00FF5E" class="fa-solid fa-child-reaching"></i> Ease of Use</a>
                <br>
                <a id="optionsoianchor" class="sidebaranchor" href="#inclusionoptions"><i style="background-color:#FF9900; font-size:15px !important" class="fa-solid fa-puzzle-piece"></i> Only Include</a>
            </div>

        </div>
        <div id="settingsmainpane">
            <center>
                <br>
                <Br>
                <h1 class="textelement">Options</h1>
                <p class="textelement" style="font-size: 15px; color:#989898 !important; max-width:85%;">
                    <a style="font-family: 'Dosis' , sans-serif; color:#666666 !important; margin-left:30px; margin-bottom:10px;" class="aintext dependencieslink" href="Information/cookiepolicy"><i style="margin-right:10px;" class="fa-solid fa-cookie-bite"></i> Cookie Policy</a>
                    <a style="font-family: 'Dosis', sans-serif; color:#666666 !important; margin-left:30px;" class="aintext dependencieslink" href="Information/dependencies"><i style="margin-right:10px;" class="fa-solid fa-file-code"></i> Dependencies</a>
                </p>
                <br>
                <Br>
                <a title="Close options" onclick="settings(); SetCountDowngeneral();"><i class="fa-solid fa-gear"></i> Close</a>
                <a title="Get a shareable link or QR code" id="sharebuttonoptions" href="#linkoptions"><i class="fa-solid fa-arrow-up-from-bracket"></i> Share</a>
		<!--<a title="Countdown Dashboard" id="dashboardbuttonoptions" href="https://michaeldors.com/mcacountdown/countdowndashboard"><i class="fa-solid fa-border-all"></i> Dashboard</a>-->
                <a title="Save to Countdown Dashboard" id="savedash" onclick="savetodash();"><i class="fa-solid fa-star"></i> Save</a>
                <a title="Reset all Countdown options and saved data" id="reset" class="warning" onclick="resetcookies();"><i class="fa-solid fa-trash"></i> Reset All</a>

		    
		<h1>Debug Options</h1>
		<p style="font-family: 'Dosis', sans-serif; color:white; font-size:16px;">
                    <strong>Why am I seeing this?</strong> These options are displayed on some Beta builds to help test these versions.
                </p>
		
		<a id="reset" class="warning" onclick="schedule_resetAll();"><i class="fa-solid fa-trash"></i> Reset Schedule</a>
		<a id="reset" class="warning" onclick="eraseCookie('cookiesAccepted');"><i class="fa-solid fa-trash"></i> Revoke Cookie Consent</a>



                <div style="width:100%; margin:0px; padding:0px; border-top: #242424 2px solid; border-bottom: #242424 2px solid; margin-top: 150px; background: linear-gradient(to right, rgba(0,0,0,0), rgba(57,184,251,0.2))">
                    <h1><i style="color: #39B8FB" class="fa-solid fa-paper-plane"></i> Shareable Options</h1>
                    <p style="font-family: 'Dosis', sans-serif; color:white; font-size:16px; margin-bottom:30px;">Options that are saved in the link for this Countdown, not with your preferences.</p>
                </div>
                <br />
                <br />
                <br />
                <h1 id="generaloptions">General Options</h1>
                <br>
                <br>
                <br>
                <!--<h2 class="textelement" style="font-family: 'Dosis';">
                    Presets <span class="betatag">BETA</span>
                </h2>
                <div class="presetswrapper">
                    <div class="presetsicon"><i id="presetsleft" class="fa-solid fa-angle-left"></i></div>
                    <ul class="presetstabs-box" id="presetstabs-box">
                        <li id="endtab" class="imgtab" onclick="MESPreset();"><img src="Backgrounds/Presets/Covers/1.png"></li>
                        <li id="nydtab" class="imgtab" onclick="NYDPreset();"><img src="Backgrounds/Presets/Covers/2.png"</li>
                        <li id="vdtab" class="imgtab" onclick="VDPreset();"><img src="Backgrounds/Presets/Covers/3.png" y</li>
                        <li id="eastab" class="imgtab" onclick="EASTERPreset();"><img src="Backgrounds/Presets/Covers/4.png"</li>
                        <li id="idtab" class="imgtab" onclick="IDPreset();"><img src="Backgrounds/Presets/Covers/5.png"</li>
                        <li id="htab" class="imgtab" onclick="HPreset();"><img src="Backgrounds/Presets/Covers/6.png"</li>
                        <li id="ttab" class="imgtab" onclick="TPreset();"><img src="Backgrounds/Presets/Covers/7.png"</li>
                        <li id="ctab" class="imgtab" onclick="CPreset();"><img src="Backgrounds/Presets/Covers/8.png"</li>
                    </ul>
                    <div class="presetsicon"><i id="presetsright" class="fa-solid fa-angle-right"></i></div>
                </div>
                <br />
                <br />-->
		<div id="optionsdatecontainer">
                <h2 class="textelement" style="font-family: 'Dosis';">
                    Date
                </h2>

                <input class="datepicker" type="datetime-local" onblur="SetCountDowngeneral();" />
                <div class="wrapper">
                    <div class="icon"><i id="left" class="fa-solid fa-angle-left"></i></div>
                    <ul class="tabs-box" id="tabs-box">
                        <!--<li id="customtab" class="tab active">Custom</li>-->
                        <li title="Automatically pick the next upcoming holiday" id="autopilottab" class="autopilottab" onclick="autopilottab();"><i class="fa-solid fa-wand-magic-sparkles"></i> Autopilot</li>
                        <li id="endtab" class="mcatab" onclick="MES();">MCA</li>
                        <li id="nydtab" class="tab" onclick="NYD();">New Year's Day</li>
                        <li id="vdtab" class="tab" onclick="VD();">Valentine's Day</li>
                        <li id="endtab" class="tab" onclick="EASTER();">Easter</li>
                        <li id="idtab" class="tab" onclick="ID();">Independence Day</li>
                        <li id="htab" class="tab" onclick="H();">Halloween</li>
                        <li id="ttab" class="tab" onclick="T();">Thanksgiving</li>
                        <li id="ctab" class="tab" onclick="C();">Christmas</li>
                    </ul>
                    <div class="icon"><i id="right" class="fa-solid fa-angle-right"></i></div>
                </div>
                <br />
                <br />
		</div>
                <h2 class="textelement" style="font-family: 'Dosis';">
                    Title
                </h2>
                <input onblur="setcountdowntitle('settings');" id="cdtitlesettings" class="input" placeholder="Pick a title" style="margin-bottom:75px;" />
                <button style="background:transparent; color:white; border:none; outline:none; cursor:pointer">
                    <i id="magictitle" title="Magic Title" class="fa fa-wand-magic-sparkles" style="transform:scale(1.75); padding-left:10px;" onclick="magictitle()"></i>
                </button>
                <h2 class="textelement" style="font-family: 'Dosis';" id="linkoptions">
                    Link
                </h2>


                <input id="linkinput" class="input" />
                <button style="background:transparent; color:white; border:none; outline:none; cursor:pointer">
                    <i title="Copy link" class="fa fa-clone" style="transform:scale(1.75); padding-left:10px;" onclick="copyinputtextlink()"></i>
                </button>
                <br />
                <br />
                <div style="border-radius: 20px; background: linear-gradient(to bottom right, #FFFFFF, #FFFFFF, #BD8BFF);margin-bottom:125px; padding: 20px; color: black; height: 180px; width: 380px;">
                    <div id="qrcode" style="float: left; box-shadow: #ffffff 1px 1px 25px; padding-top: 15px; padding-left:20px; transform:scale(1.1)"></div>
                    <div style="float:left; padding-left:30px; text-align:left;">
                        <p style="color:black; font-size:27px; line-height:0.1;">QR Code</p>
                        <p style="font-family: 'Dosis', sans-serif; color:black; font-size:16px; line-height:0.9">
                            Scan on most camera apps<br /> to go to the countdown.
                        </p>
                        <a onmouseup="downloadQR()"><i class="fa-solid fa-download"></i> Download</a>
                    </div>

                </div>
                <h1 id="customizationoptions">Customization</h1>
                <br>
                <br>
                <br>

                <h2 class="textelement" style="font-family: 'Dosis';">
                    Foreground Colors <span class="betatag">BEING UPDATED</span>
                </h2>


                <div id="colorPickersContainer">
                    <div class="colorpicker-container">
                        <input class="colorpicker" id="color1" type="color" value="#8426ff" onblur="SetCountDowngeneral();" />
                    </div>
                    <div class="colorpicker-container">
                        <input class="colorpicker" id="color2" type="color" value="#3ab6ff" onblur="SetCountDowngeneral();" />
                        <div class="remove-button" onclick="removeColorPicker(this)">-</div>
                    </div>
                    <div class="colorpicker-container">
                        <input class="colorpicker" id="color3" type="color" value="#00ff5e" onblur="SetCountDowngeneral();" />
                        <div class="remove-button" onclick="removeColorPicker(this)">-</div>
                    </div>
                    <div class="colorpicker-container">
                        <input class="colorpicker" id="color4" type="color" value="#ff9900" onblur="SetCountDowngeneral();" />
                        <div class="remove-button" onclick="removeColorPicker(this)">-</div>
                    </div>
                </div>
                <div class="clradd" onmouseup="addColorPicker()"><i class="fa-solid fa-plus"></i></div>

                <p style="font-family: 'Dosis', sans-serif; color:white; font-size:16px;">
                    The foreground elements will cycle through the chosen colors.
                    <br />
                    Keep contrast in mind when choosing colors.
                </p>
                <br />
                <br />
                <br>
                <br>
                <h2 class="textelement" style="font-family: 'Dosis';">
                    Background
                </h2>

                <a class="aintext backgroundpicker bgbtnn" id="bgbtn1" onmouseup="setbg('1', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_1.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn2" onmouseup="setbg('2', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_2.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn3" onmouseup="setbg('3', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_3.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn4" onmouseup="setbg('4', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_4.png"></div></a>
                <br />
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn5" onmouseup="setbg('5', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_5.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn6" onmouseup="setbg('6', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_6.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn7" onmouseup="setbg('7', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_7.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn8" onmouseup="setbg('8', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_8.png"></div></a>
                <br />
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn9" onmouseup="setbg('9', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_9.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn10" onmouseup="setbg('10', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_10.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn11" onmouseup="setbg('11', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_11.png"></div></a>
                <a class="aintext backgroundpicker bgbtnn" id="bgbtn12" onmouseup="setbg('12', 'manual')"><div><img style="width:0.85in; height: 0.35in; border-radius: 10px; margin-top:0.07in; filter:blur(5px);" src="Backgrounds/enhancedbackground_12.png"></div></a>
                <br />
                <br />
                <br>
                <br>
                <br />
                <br />
                <h2 class="textelement" style="font-family: 'Dosis';">
                    Typeface
                </h2>
                <a class="aintext selectedfontpicker" id="fredoka" style="font-family:'Fredoka One'" onmouseup="FontFredoka('Manual');">12:34</a>
                <a class="aintext fontpicker" id="poppins" style="font-family:'Poppins'" onmouseup="FontPoppins('Manual');">12:34</a>
                <a class="aintext fontpicker" id="dmserif" style="font-family: 'DM Serif Display', serif;" onmouseup="FontDMSerif('Manual');">12:34</a>
                <a class="aintext fontpicker" id="orbitron" style="font-family:'Orbitron'" onmouseup="FontOrbitron('Manual');">12:34</a>
                <br>
                <br>
                <Br>
                <Br>
                <br>
                <br>
		<div id="optionsendingcontainer">
                <h1 id="endingoptions">Ending Options</h1>
                <h2 class="textelement" style="font-family: 'Dosis';">Confetti Options <span class="betatag">BETA</span></h2>
                <a class="aintext" href="#appearanceoptions" style="font-size:16px; font-family: 'Dosis', sans-serif; color:white; text-decoration: underline;">You can disable confetti for all countdowns in your Personal Options.</a>
                <br>
                <br>
                <br>
                <h2 class="textelement" style="font-family: 'Dosis';">Ending Sound</h2>
                <div class="container">
                    <input class="input" type="text" id="audioLink" placeholder="Audio link">
                </div>
                <p style="font-family: 'Dosis', sans-serif; color:white; font-size:16px;">
                    Enter a YouTube, SoundCloud, or audio file link to play when the Countdown ends.
                    <br />
                    Any ADs that may be placed by the service will remain.
                </p>
                <a class="aintext" href="#eouoptions" style="font-size:16px; font-family: 'Dosis', sans-serif; color:white; text-decoration: underline;">You can disable ending sounds for all countdowns in your Personal Options.</a>
                <div id="playerContainer" style="display: none;"></div>
                <br>
                <br>
                <br>
		</div>
                <h1 id="scheduleoptions">Countdown Schedule <span class="betatag">BETA</span></h1>
		<h2 style="font-family: 'Dosis';" >Convert to Countdown Schedule</h2>
		<div style="text-align:left; width:auto;">
		    <h3 style="font-family: 'Dosis', sans-serif; color:white;">
			<i style="color:#3ab6ff" class="fa-solid fa-calendar"></i> Keep track of your recurring events
			<br>
		    <i style="color:#00FF5E" class="fa-solid fa-briefcase"></i> Set different schedules for different days
			<br>
		    <i style="color:#ff9900" class="fa-solid fa-circle-exclamation"></i> Once you convert this Countdown to be a Schedule, it cannot be changed back
			</h3>
		</div>
		<a>Supercharge Your Schedule</a>

		<br>
		<br>
		<br>

                <div class="schedule-editor" style="color: white !important;">
                    <div class="schedule-container">
                        <h2 style="font-family: 'Dosis';">Edit Schedule</h2>
                        <div class="schedule-form-group">
                            <input type="text" placeholder="Pick a title" id="schedule-eventTitle" required>
                        </div>
                        <div class="schedule-form-group">
                            <input type="time" id="schedule-startTime" style="margin-right:10px" required>
                            <label for="schedule-endTime">to</label>
                            <input type="time" id="schedule-endTime" style="margin-left:10px;" required>
                        </div>
                        <a id="schedule-addOrUpdateEventBtn"><i class="fa-solid fa-plus-circle"></i> Add Event</a>
                        <br>
                        <br>
                        <br>

                        <div class="schedule-editor-section">
                            <h2 style="font-family: 'Dosis';">Regular Schedule</h2>
                            <button style="font-family: 'Dosis'" class="schedule-collapsible" onclick="schedule_toggleCollapsible(this)">Show/Hide Regular Schedule</button>
                            <div class="schedule-content">
                                <ul id="schedule-eventList"></ul>
                            </div>
                        </div>

                        <div class="schedule-editor-section">
                            <h2 style="font-family: 'Dosis';">Exception Days</h2>
                            <div class="schedule-form-group">
                                <label for="schedule-exceptionDay">Add Exception Day:</label>
                                <select id="schedule-exceptionDay">
                                    <option value="0">Sunday</option>
                                    <option value="1">Monday</option>
                                    <option value="2">Tuesday</option>
                                    <option value="3">Wednesday</option>
                                    <option value="4">Thursday</option>
                                    <option value="5">Friday</option>
                                    <option value="6">Saturday</option>
                                </select>
                                <a id="schedule-addExceptionBtn"><i class="fa-solid fa-plus-circle"></i> Add Exception Day</a>
                            </div>
                            <div style="font-family: 'Dosis'" id="schedule-exceptionList"></div>
                        </div>
                    </div>
                </div>
                <br>
                <br>
		<div id="optionsprogresscontainer">
                <h1 id="progressoptions">Progress <span class="betatag">BETA</span></h1>
		<h2 style="font-family: 'Dosis';">Starting Date</h2>
		<input class="progressdatepicker" type="datetime-local" onblur="SetCountDowngeneral();" />
		<br>
		<br>
		<br>
		<h2 style="font-family: 'Dosis';">Position</h2>
		<a class="aintext selectedfontpicker"><img title="No progress bar" alt="No progress bar option" style="width:1in; height:1in;" src="progressbaroptionsicons/1no.png"/></a>
                <a class="aintext fontpicker"><img title="Bottom progress bar" alt="Bottom progress bar option" style="width:1in; height:1in;" src="progressbaroptionsicons/2bottom.png"/></a>
                <a class="aintext fontpicker"><img title="Under clock progress bar" alt="Under clock progress bar option" style="width:1in; height:1in;" src="progressbaroptionsicons/3middle.png"/></a>
                <a class="aintext fontpicker"><img title="Top progress bar" alt="Top progress bar option" style="width:1in; height:1in;" src="progressbaroptionsicons/4top.png"/></a>
                <br>
                <br>
                <br>
		</div>
    <br>
    <div style="width:100%; margin:0px; padding:0px; border-top: #242424 2px solid; border-bottom: #242424 2px solid; margin-top: 150px; background: linear-gradient(to right, rgba(0,0,0,0), rgba(254,154,0,0.2))">
        <h1><i style="color: #FE9A00" class="fa-solid fa-user-lock"></i> Personal Options</h1>
        <p style="font-family: 'Dosis', sans-serif; color:white; font-size:16px; margin-bottom:30px;">Options that are applied across all Countdowns and not shared in the link.</p>
    </div>
    <br />
    <br />
    <br />
    <br />
    <h1 class="textelement" id="appearanceoptions">
        Appearance
    </h1>
    <br>
    <h2 class="textelement" style="font-family: 'Dosis';">
        Animation Speed
    </h2>

    <form action="" id="searchTypeToggle" style="zoom:150%">
        <div></div>
        <label>
            <input type="radio" name="searchtype" data-location="0" value="one" id="speed2">
            <div style="font-family: 'Dosis';"><i class="fa-solid fa-seedling"></i>  Slow</div>
        </label>
        <label class="selected">
            <input type="radio" name="searchtype" data-location="calc(100% - 11px)" value="two" id="speed1">
            <div style="font-family: 'Dosis';"><i class="fa-solid fa-gauge"></i>  Default</div>
        </label>
        <label>
            <input type="radio" name="searchtype" data-location="calc(200% - 22px)" value="three" id="speed3">
            <div style="font-family: 'Dosis';"><i class="fa-solid fa-bolt"></i>  Fast</div>
        </label>
    </form>
    <br>
    <Br>
    <Br>
    <Br>
    <a id="lcdu" class="disabled" onclick="lcdu();"><i class="fa-solid fa-tag"></i> Label Time Units <span class="betatag">BEING UPDATED</span></a>
    <a id="coce" class="disabled"><i class="fa-solid fa-hand"></i> Disable Animations <span class="betatag">BETA</span></a>
    <a id="coce" class="disabled" onclick="coce();"><i class="fa-solid fa-cake-candles"></i> Disable Confetti</a>

    <h1 class="textelement" id="eouoptions">
        Ease of Use
    </h1>
    <Br>
    <a id="coce" class="disabled"><i class="fa-solid fa-volume-mute"></i> Disable End Sounds <span class="betatag">BETA</span></a>
    <a id="memsav" class="disabled" onclick="memsav();"><i class="fa-solid fa-gauge-high"></i> Memory Saver</a>

	<div id="optionsonlyincludecontainer">
    <h1 id="inclusionoptions" class="textelement">
        Only Include
    </h1>
    <br>
    <a id="week" class="disabled" onclick="week();"><i class="fa-solid fa-calendar-week"></i> Weeks</a>
    <a id="day" class="disabled" onclick="day();"><i class="fa-solid fa-calendar-days"></i> Days</a>
    <a id="hour" class="disabled" onclick="hour();"><i class="fa-solid fa-clock"></i> Hours</a>
    <a id="minute" class="disabled" onclick="minute();"><i class="fa-solid fa-hourglass-start"></i> Minutes</a>
    <a id="second" class="disabled" onclick="second();"><i class="fa-solid fa-stopwatch-20"></i> Seconds</a>
    <a id="millisecond" class="disabled" onclick="millisecond();"><i class="fa-solid fa-meteor"></i> Milliseconds</a>
</div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
      </div>
    </center>
    </div>



    <div id="autopilotpopup" style="margin:0; padding:0; position:absolute; top:80%; left:0px; width:100%; height:20%; border-top:solid 3px white; opacity:1; transition:0.5s opacity;">
        <h1 style="position: absolute; top: 15%; left: calc(50vw - 21px); paint-order: stroke fill; -webkit-text-stroke-width: 10px; -webkit-text-stroke-color: #141414;">or</h1>
        <div onclick="settings()" id="manualpilot" style="background-image:url(calendarbg.png); background-size:cover; width: 50%; float: left; height: 100%; cursor:pointer;">
            <h1 style="margin-left:3.75%" id="gearpointer"><i style="margin-right:30px;" class="fa-solid fa-angle-down"></i><span style="padding-top:100px;">pick a date</span></h1>
        </div>
        <div id="autopilot" style="float: right; width: 50%; background: linear-gradient(to right, #141414, #01FE5E); height: 100%; outline: 3px white solid; ">
            <div id="autopilotinfo" style="margin-left: 60px;">
                <h3 style="position: relative; display: inline-block; background-color: white; border-radius: 20px; padding: 5px 10px 5px 10px;">
                    <span style="color: #11371f;">
                        AUTOPILOT
                    </span>
                </h3>
                <h1 id="autopilotprediction" style="line-height:0.000001">Finding...</h1>
            </div>
            <div onmouseup="closeautopanel();" style="cursor:pointer;" class="autopilot-countdown-container">
                <div class="autopilot-countdown-number">X</div>
                <svg class="autopilot-countdown-circle" viewBox="0 0 64 64">
                    <circle class="outer-circle" cx="32" cy="32" r="29"></circle>
                    <circle class="progressbarr" r="27" cx="32" cy="32"></circle>
                </svg>
            </div>


        </div>
    </div>

    <div id="autopilotpopupmobile" style="margin:0; padding:0; position:absolute; top:60%; left:0px; width:100%; height:40%; opacity:1; transition:0.5s opacity;">
        <div id="autopilotmobile" style="width: 100%; background: linear-gradient(to bottom, rgba(255,0,0,0), #01FE5E); height: 45%;">
            <div id="autopilotinfomobile" style="margin-left: 60px;">
                <h3 style="position: relative; display: inline-block; background-color: white; border-radius: 20px; padding: 5px 10px 5px 10px;">
                    <span style="color: #11371f;">
                        AUTOPILOT
                    </span>
                </h3>
                <h1 id="autopilotpredictionmobile" style="line-height:0.000001">Finding...</h1>
            </div>
        </div>
        <h1 style="position: absolute; top: 33%; text-align: center; width:100%; color: white; paint-order: stroke fill; -webkit-text-stroke-width: 10px; -webkit-text-stroke-color: #141414;">or</h1>
        <div id="manualpilotmobile" style="background-image:url(calendarbg.png); margin-top:0px; background-size:cover; width: 100%; height: 100%; border-top:3px solid white;">
            <h2 id="gearpointer" style="text-align: center; width:100%; padding-top:20px;">
                <span style="padding-top:100px;">pick a date under</span>
            </h2>
            <div style="text-align: center;">
                <a class="whitebutton" style="display: inline-block;" onclick="settings();"><i class="fa-solid fa-gear"></i> Options</a>
            </div>
        </div>

    </div>
</body>

<style>

    :root {
        --one: #8426ff;
        --two: #3ab6ff;
        --three: #00ff5e;
        --four: #ff9900;
        --typeface: 'Fredoka One';
        --comptypeface: 'Dosis';
    }

    * {
        scrollbar-width: auto;
        scrollbar-color: #8426ff #0d0d0d;
    }

    html{
        scroll-behavior: smooth;
    }

    ::-moz-selection {
        color: white;
        background: #8426ff;
    }

    input[type="color"] {
        transition: 0.5s all;
    }

    ::selection {
        color: white;
        background: #8426ff;
    }

    .colorpicker {
        margin: 10px;
        height: 0.5in;
        width: 1in;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        outline: 1px solid #8426ff;
        background: #141414;
        border: none;
        cursor: pointer;
    }

    .clradd{
        height:0.5in;
        transform:scale(1);
        width:calc(4in + 60px) !important;
        border: 1px solid #01FF5E;
        background: linear-gradient(to bottom right, #01ff5e94, #00836D);
        color:white;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        cursor: pointer;
        box-shadow: 0px transparent;
        margin:15px;
        background-color: transparent;
        box-shadow: 0 0px 0 transparent;
        transition:0.5s all ease;
        filter: grayscale(0%) !important;
    }

    .clraddoff{
        filter: grayscale(100%) !important;
        cursor: not-allowed !important;
        transition: 0.5s all ease;
    }
    .clradd:hover{
        box-shadow: 0 0px 0 transparent !important;
        top: -0.2in !important;
    }
    .clradd .fa-plus{
        width:1in;
        height:0.5in;
        margin-top:0.15in;
        color:white;
        margin-left:0px;
    }

    .colorpicker-container {
    transition: all 0.2s; /* Delay width transition until after opacity */
    width: auto; /* Adjust as needed */
    opacity: 1;
    transform:scale(1);

}

    #colorPickersContainer{
        transition:0.25s all ease;
    }

    #animatedbackground {
        opacity: 1;
        transition: 1s opacity ease-in-out;
        position:fixed;
        z-index:-3;
        left:0;
        top:0;
    }

    .backgroundpicker {
        margin: 10px !important;
        height: 0.5in;
        width: 1in;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        outline: 1px solid #8426ff;
        background: #141414;
        border: none;
        transition: 0.3s all;
    }

    .selectedbackgroundpicker {
        margin: 10px !important;
        height: 0.5in;
        width: 1in;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        outline: 1px solid #01FE5E;
        background: #141414;
        border: none;
        transition: 0.3s all;
    }

    .fontpicker {
        color: white !important;
        line-height: 100px;
        margin: 10px !important;
        width: 1in;
        font-size: 20px;
        border-radius: 20px;
        outline: 1px solid #8426ff;
        background: #141414;
        border: none;
        transition: 0.3s all;
        padding-top: 20px;
    }

    .selectedfontpicker {
        outline: 1px solid #01FE5E;
        background: #141414;
        border: none;
        transition: 0.3s all;
        padding-top: 20px;
        color: white !important;
        line-height: 100px;
        margin: 10px !important;
        width: 1in;
        font-size: 20px;
        border-radius: 20px;
    }

    .disabledcolorpicker {
        margin: 10px;
        height: 0.5in;
        width: 1in;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        outline: 1px solid #202020;
        background: #141414;
        border: none;
        opacity: 0.5;
        cursor: not-allowed;
    }

        .disabledcolorpicker::-webkit-color-swatch {
            border-radius: 15px;
            border: none;
            width: 35px;
            margin-left: 1px;
            margin-right: 1px;
            filter: grayscale();
        }

        .disabledcolorpicker::-moz-color-swatch {
            border-radius: 15px;
            border: none;
            width: 35px;
            margin-left: 1px;
            margin-right: 1px;
            filter: grayscale();
        }

    .colorpicker:focus {
        margin: 10px;
        height: 0.5in;
        width: 1in;
        font-size: 20px;
        font-weight: 100;
        border-radius: 20px;
        outline: 1px solid #8426ff;
        background: #141414;
        animation: pulseborder 2s infinite;
    }

    .colorpicker-container {
        position: relative;
        display: inline-block;
    }

    .remove-button {
        position: absolute;
        top: 0px;
        right: 0px;
        width: 30px;
        height: 30px;
background: rgba(255, 0, 0, 0.46);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(6.8px);
-webkit-backdrop-filter: blur(6.8px);
border: 1px solid rgba(255, 0, 0, 0.64);
        color: white;
        border-radius: 50%;
        text-align: center;
        line-height: 25px;
        cursor: pointer;
        opacity:0;
        transition:opacity 0.3s ease-in-out;
        font-family: Fredoka One;
    }


    .colorpicker-container:hover .remove-button,
    .colorpicker:focus + .remove-button {
        opacity:1;
    }



    @keyframes pulseborder {
        1% {
            outline: 1px solid #8426ff;
        }

        50% {
            outline: 1px solid #141414;
        }

        100% {
            outline: 1px solid #8426ff;
        }
    }



    .colorpicker::-webkit-color-swatch {
        border-radius: 15px;
        border: none;
        width: 35px;
        margin-left: 1px;
        margin-right: 1px;
    }

    .colorpicker::-moz-color-swatch {
        border-radius: 15px;
        border: none;
        width: 35px;
        margin-left: 1px;
        margin-right: 1px;
    }

    .datepicker {
        color: white;
        border-radius: 20px;
        padding: 20px;
        font-size: 20px;
        font-weight: 100;
        outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        font-family: 'Fredoka One';
        border: 0px transparent;
    }

    .progressdatepicker {
        color: white;
        border-radius: 20px;
        padding: 20px;
        font-size: 20px;
        font-weight: 100;
        outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        font-family: 'Fredoka One';
        border: 0px transparent;
    }

    .input {
        color: white;
        border-radius: 20px;
        padding: 20px;
        font-size: 20px;
        font-weight: 100;
        outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        font-family: 'Fredoka One';
        border: 0px transparent;
        transition: 0.5s all;
    }

    ::-webkit-calendar-picker-indicator {
        filter: invert();
    }

    form {
        width: 70%;
        box-sizing: border-box;
        background-color: #14141400;
        text-align: center;
        position: relative;
        border-radius: 100px;
        border: 1px solid #4d00b2;
        color: white;
    }

        form > div {
            color: white;
            display: block;
            position: absolute;
            top: -4px;
            left: -4px;
            bottom: -4px;
            width: calc(33.33% + 8px);
            background: linear-gradient(to left, #14141450,#4d00b2);
            border-radius: 100px;
            z-index: 1;
            pointer-events: none;
            border: 1px solid #8426FF;
            transition: transform 0.3s;
        }

        form::after {
            content: "";
            display: block;
            clear: both;
        }

        form label {
            float: left;
            width: calc(33.333% - 1px);
            position: relative;
            padding: 20px 0px 40px;
            overflow: hidden;
            border-left: solid 1px rgba(0,0,0,0.2);
            transition: color 0.3s;
            cursor: pointer;
            -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
        }

            form label:first-child {
                border-left: none;
            }

            form label input {
                position: absolute;
                top: -200%;
            }

            form label div {
                z-index: 5;
                position: absolute;
                width: 100%;
            }

            form label.selected {
                color: white;
            }


    .fa-clone {
        transition: 0.5s;
    }

        .fa-clone:active {
            color: #00ff72;
        }

            .fa-clone:active #linkinput {
                outline-color: #00ff72;
            }

            .fa-wand-magic-sparkles {
        transition: 0.5s;
    }

        .magictitle-success {
            color: #00FF5E;
            transition: 0.5s;
        }

        .magictitle-failed{
            color:#ff3b4f;
            transition: 0.5s;
            animation: magictitlefailedshake 0.4s linear;
        }

        

		@keyframes magictitlefailedshake {
			0% { transform: translate(22.5px) scale(1.75); }
			20% { transform: translate(-22.5px) scale(1.75); }
			40% { transform: translate(16.25px) scale(1.75); }
			60% { transform: translate(-16.25px) scale(1.75); }
			80% { transform: translate(14px) scale(1.75); }
			100% { transform: translate(0px) scale(1.75); }
		}


    #gear {
        top: 95%;
        left: 3%;
    }


    .box {
        padding-top: 50px;
        padding-bottom: 50px;
        padding-left: 50px;
        padding-right: 50px;
        border-radius: 35px;
        background: linear-gradient(to left, rgba(40,23,64,88), #141414);
        border: #8426FF 1px solid;
    }

    #countdowntitle:hover {
        opacity: 1;
    }

    #countdowntitle:focus {
        border: 1px solid rgba(255,255,255,1) !important;
        outline: none;
    }

    #countdowntitle {
        font-family: var(--comptypeface);
        text-align: center;
        display: flex;
        width: 20%; /* or any other width */
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        top: calc(40% - 43px);
        background: none !important;
        border: 1px solid rgba(255,255,255,0);
        padding: 13px 20px;
        border-radius: 30px;
        color: white;
        font-size: 20px;
    }

        #countdowntitle:-webkit-autofill,
        #countdowntitle:-webkit-autofill:hover,
        #countdowntitle:-webkit-autofill:focus,
        #countdowntitle:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px #141414 inset !important;
            -webkit-background-clip: text;
            -webkit-text-fill-color: #ffffff;
        }

    .staticclock {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 99%;
        font-family: var(--typeface);
        color: #ffffff;
        /*mix-blend-mode:difference;*/
    }

    .clock {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 99%;
        font-family: var(--typeface);
        animation: backgroundgradient 100s infinite;
        z-index: 1000000;
    }

    .schedulebgcolored{
        animation:schedulebackgroundgradient 100s infinite;
    }


    .clockslow {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 99%;
        font-family: var(--typeface);
        animation: backgroundgradient 200s infinite;
        z-index: 1000000;
    }

    .schedulebgcoloredslow{
        animation:schedulebackgroundgradient 200s infinite;
    }

    .clockfast {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 99%;
        font-family: var(--typeface);
        animation: backgroundgradient 5s infinite;
        z-index: 1000000;
    }

    .schedulebgcoloredfast{
        animation:schedulebackgroundgradient 5s infinite;
    }

    .center {
        margin: auto;
        width: 50%;
        text-align: center;
    }

    h1 {
        font-size: 42px;
        font-family: 'Fredoka One';
        color: #fff;
        font-weight: 100;
    }

    h3 {
        font-family: 'Fredoka One';
        color: #fff;
        font-weight: 100;
    }

    h2 {
        font-size: 30px;
        font-family: 'Fredoka One';
        color: #fff;
        font-weight: 100;
    }

    p {
        font-family: 'Fredoka One';
        color: white;
        font-size: 20px;
        font-weight: 100;
    }

    a {
        font-family: 'Fredoka One';
        background-color: #8426ff;
        text-decoration: none;
        color: white;
        box-shadow: 0 7px 0 #4d00b2;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
        margin: 0px 5px 25px 5px;
        display: inline-block;
    }
    a:hover {
        position: relative;
        top: 4px;
        box-shadow: 0 5px 0 #4d00b2;
        display: inline-block;
    }

    .aintext {
        font-family: 'Fredoka One';
        color: #8426ff;
        font-size: 20px;
        font-weight: 100;
        cursor: pointer;
        box-shadow: 0px transparent;
        padding: 0px;
        margin: 0px;
        background-color: transparent;
        box-shadow: 0 0px 0 transparent;
    }

        .aintext:hover {
            box-shadow: 0 0px 0 transparent;
        }


        .dependencieslink:hover{
            box-shadow: 0 0px 0 transparent;
            top: 0px;
        }
    .a2 {
        font-family: 'Fredoka One';
        background-color: #8426ff;
        text-decoration: none;
        color: white;
        box-shadow: 0 7px 0 #4d00b2;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
        margin: 0px 0px 0px 0px;
        display: initial;
        position: relative;
    }

    .outlinebutton {
        font-family: 'Fredoka One';
        background-color: #141414;
        text-decoration: none;
        color: white;
        border: #8426ff solid 1px;
        box-shadow: 0 7px 0 #4d00b2;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

    .a2:hover {
        position: relative;
        top: 2px;
        margin-top: 2px;
        box-shadow: 0 5px 0 #4d00b2;
        display: initial;
    }

    a:hover:active {
        position: relative;
        top: 9px;
        box-shadow: none;
        display: inline-block;
    }

    .a2:hover:active {
        position: relative;
        top: 7px;
        margin-top: 7px;
        box-shadow: none;
    }

    .enabled {
        font-family: 'Fredoka One';
        background-color: #00ff5e;
        text-decoration: none;
        color: black;
        box-shadow: 0 7px 0 #00b041;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        .enabled:hover {
            position: relative;
            box-shadow: 0 5px 0 #00b041;
        }

            .enabled:hover:active {
                position: relative;
                box-shadow: none;
            }

    .disabled {
        font-family: 'Fredoka One';
        background-color: #595959;
        text-decoration: none;
        color: white;
        box-shadow: 0 7px 0 #282828;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        .disabled:hover {
            position: relative;
            box-shadow: 0 5px 0 #282828;
        }

            .disabled:hover:active {
                position: relative;
                box-shadow: none;
            }

    .whitebutton {
        font-family: 'Fredoka One';
        background-color: white;
        text-decoration: none;
        color: black;
        box-shadow: 0 7px 0 #9a9a9a;
        border-radius: 20px;
        padding: 20px;
        padding-left: 30%;
        padding-right: 30%;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
        height: 25px;
        position: relative;
        overflow: hidden;
    }

        .whitebutton:hover {
            box-shadow: 0 5px 0 #777777;
        }

            .whitebutton:hover:active {
                box-shadow: none;
            }

        .whitebutton::before {
            content: "";
            mix-blend-mode: multiply;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%; /* Match button height */
            width: 0; /* Start at 0 width */
            background-color: #cccccc; /* Grey color for progress bar */
            animation: progress-fill 10s ease-in forwards;
            z-index: 1; /* Place behind text but above button background */
        }

    @keyframes progress-fill {
        from {
            width: 0;
        }

        to {
            width: 100%;
        }
    }

    .warning {
        font-family: 'Fredoka One';
        background-color: #ff5353;
        text-decoration: none;
        color: #ffffff;
        box-shadow: 0 7px 0 #d00000;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        .warning:hover {
            position: relative;
            box-shadow: 0 5px 0 #d00000;
        }

            .warning:hover:active {
                position: relative;
                box-shadow: none;
            }
            
    #savedash {
        font-family: 'Fredoka One';
        background-color: #FF9900;
        text-decoration: none;
        color: #ffffff;
        box-shadow: 0 7px 0 #bf7200;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        #savedash:hover {
            position: relative;
            box-shadow: 0 5px 0 #bf7200;
        }

            #savedash:hover:active {
                position: relative;
                box-shadow: none;
            }

        #sharebuttonoptions {
        font-family: 'Fredoka One';
        background-color: #3AB6FF;
        text-decoration: none;
        color: #ffffff;
        box-shadow: 0 7px 0 #1374ad;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        #sharebuttonoptions:hover {
            position: relative;
            box-shadow: 0 5px 0 #1374ad;
        }

            #sharebuttonoptions:hover:active {
                position: relative;
                box-shadow: none;
            }

	#dashboardbuttonoptions{
		font-family: 'Fredoka One';
        	background-color: #00ff5e;
        text-decoration: none;
        color: #ffffff;
        box-shadow: 0 7px 0 #00b041;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
	}

	        #dashboardbuttonoptions:hover {
            position: relative;
            box-shadow: 0 5px 0 #00b041;
        }

            #dashboardbuttonoptions:hover:active {
                position: relative;
                box-shadow: none;
            }

            .betabutton {
        font-family: 'Fredoka One';
        background: linear-gradient(#8c52ff, #ff914d);
        text-decoration: none;
        color: white;
        box-shadow: 0 7px 0 #c67700;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
        font-size: 20px;
        font-weight: 100;
    }

        .betabutton:hover {
            position: relative;
            box-shadow: 0 5px 0 #c67700;
        }

            .betabutton:hover:active {
                position: relative;
                box-shadow: none;
            }

    .settings {
        font-family: 'Fredoka One';
        background-color: transparent;
        text-decoration: none;
        color: #ffffff;
        box-shadow: none;
        border-radius: 20px;
        padding: 20px;
        user-select: none;
        cursor: pointer;
    }

        .settings:hover {
            position: relative;
            top: 0px;
            margin-top: 0px;
            box-shadow: none;
            color: #a7a7a7;
        }

            .settings:hover:active {
                position: relative;
                top: 0px;
                margin-top: 0px;
                box-shadow: none;
                color: #8426ff;
            }

            #settingsmainpane{
                float:right;
                width:80vw;
                background: rgba(20, 20, 20, 0.83);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(75px);
                -webkit-backdrop-filter: blur(75px);
                position:absolute;
                top:0px;
                right:0px;
            }
            #settingssidebar{
                height:100vh;
                padding:none;
                position:fixed;
                top: 0;
                bottom: 0;
                overflow-y: scroll;
                scrollbar-width: none;  /* Firefox */
                -ms-overflow-style: none;  /* Internet Explorer 10+ */
                float:left;
                width:20vw;
                left:-5px;
                top:-5px;
                padding-top:25px;
                background-color:black;
                z-index:10000;
		white-space:nowrap;
            }
            #settingssidebar::-webkit-scrollbar {
                width:0;
                background:transparent;
            }
            .sidebaranchor{
                font-family:'Dosis';
                background:none;
                text-decoration:none;
                color:white;
                box-shadow:none;
                border-radius: none;
                user-select: none;
                cursor:pointer;
                font-size:20px;
                font-weight:100;
                margin:0px;
                display:initial;
                padding:0px;
		overflow:hidden;
		white-space:nowrap;
            }
            .sidebaranchor:hover{
                position:initial !important;
                top:initial !important;
                box-shadow: none !important;
                display:initial !important;
            }
            #settingssidebarpaneshareable{
                width:90%;
                margin-left:5%;
                border-radius: 20px;
            }
            #settingssidebarpaneshareable h3{
                margin-left:5px;
                line-height:0px;
            }
            #settingssidebarpaneshareable a{
                font-family:Dosis, sans-serif;
                margin-left:20px;
                padding-bottom:5px;
            }
            #settingssidebarpaneshareable a i{
                text-align: center;
                line-height:30px;
                background-color:#8426FF;
                font-size:20px;
                width:30px !important;
                height:30px !important;
                border-radius: 100px;
                margin-bottom:10px;
            }
            #settingssidebarpanepersonal{
                width:90%;
                margin-left:5%;
                border-radius: 20px;
                margin-bottom:30px;
            }
            #settingssidebarpanepersonal h3{
                margin-left:5px;
                line-height:0px;
            }
            #settingssidebarpanepersonal a{
                font-family:Dosis, sans-serif;
                margin-left:20px;
                padding-bottom:5px;
            }
            #settingssidebarpanepersonal a i{
                text-align: center;
                line-height:30px;
                background-color:#8426FF;
                font-size:20px;
                width:30px !important;
                height:30px !important;
                border-radius: 100px;
                margin-bottom:10px;
            }


    .hidden {
        display: none;
    }

    .hiddentext {
        color: #141414;
        user-select: none;
    }

    .wrapper {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        padding: 0 10px;
        align-items: center;
        justify-content: center;
        display: flex;
        padding: 35px;
        position: relative;
        overflow-x: hidden;
        max-width: 1000px;
        border-radius: 35px;
    }

        .wrapper .icon {
            position: absolute;
            top: 0;
            height: 100%;
            width: 120px;
            display: flex;
            align-items: center;
        }

    .icon:first-child {
        left: 0;
        display: none;
        background: linear-gradient(90deg, #141414, transparent);
    }

    .icon:last-child {
        right: 0;
        justify-content: flex-end;
        background: linear-gradient(-90deg, #141414, transparent);
    }

    .icon i {
        width: 45px;
        height: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        text-align: center;
        line-height: 75px;
        color: white;
        background: #141414;
        border-radius: 50%;
    }

    .presetswrapper {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        padding: 0 10px;
        align-items: center;
        justify-content: center;
        display: flex;
        padding: 35px;
        position: relative;
        overflow-x: hidden;
        max-width: 1000px;
        border-radius: 35px;
    }
    
    .presetswrapper .presetsicon {
            position: absolute;
            top: 0;
            height: 100%;
            width: 120px;
            display: flex;
            align-items: center;
            text-align: center;
        }

    .presetsicon:first-child {
        left: 0;
        display: none;
        background: linear-gradient(90deg, #141414, transparent);
    }

    .presetsicon:last-child {
        right: 0;
        justify-content: flex-end;
        background: linear-gradient(-90deg, #141414, transparent);
    }

    .presetsicon i {
        width: 45px;
        height: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        text-align: center;
        line-height: 75px;
        color: white;
        background: #141414;
        border-radius: 50%;
    }


    .fa-xmark {
        animation: fadeinout 5s infinite;
    }

    #innergear {
        text-shadow: #000 0px 0px 5px;
        -webkit-font-smoothing: antialiased;
        }



    @keyframes fadeinout {
        0% {
            opacity: 0;
            filter: blur(10px);
            transform: scale(1);
        }

        25% {
            opacity: 1;
            filter: blur(0px);
            transform: scale(1.5);
        }

        50% {
            opacity: 1;
            filter: blur(0px);
            transform: scale(2);
        }

        80% {
            opacity: 1;
            filter: blur(0px);
            transform: scale(1.5);
        }

        100% {
            opacity: 0;
            filter: blur(10px);
            transform: scale(1);
        }
    }


    .icon:first-child i {
        margin-left: 15px;
    }

    .icon:last-child i {
        margin-right: 15px;
    }

    .wrapper {
        max-width: 70%;
    }

        .wrapper .tabs-box {
            display: flex;
            gap: 12px;
            list-style: none;
            overflow-x: hidden;
            overflow-y: hidden;
            scroll-behavior: smooth;
            max-width: 90%;
        }

    .tabs-box.dragging {
        scroll-behavior: auto;
        cursor: grab;
    }

    .tabs-box .tab {
        margin: 0px;
        cursor: pointer;
        font-size: 1.18rem;
        white-space: nowrap;
        background: linear-gradient(to left, rgba(94, 0, 225, 0.8), #14141400);
        border: #8426FF 1px solid;
        padding: 13px 20px;
        border-radius: 30px;
        transition: 0.5s all;
        color: white;
        font-family: 'Fredoka One';
    }

    .tabs-box .mcatab {
        margin: 0px;
        cursor: pointer;
        font-size: 1.18rem;
        white-space: nowrap;
        background: linear-gradient(to left, rgba(31,179,255,0.5), #14141400);
        border: #26b3ff 1px solid;
        padding: 13px 20px;
        border-radius: 30px;
        transition: 0.5s all;
        color: white;
        font-family: 'Fredoka One';
    }

    .tabs-box .autopilottab {
        margin: 0px;
        cursor: pointer;
        font-size: 1.18rem;
        white-space: nowrap;
        background: linear-gradient(to left, #00ff5e90, #14141400);
        border: #00FF5E 1px solid;
        padding: 13px 20px;
        border-radius: 30px;
        transition: 0.5s all;
        color: white;
        font-family: 'Fredoka One';
    }

    

    .tabs-box.dragging .tab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

    .tabs-box .tab.active {
        color: #fff;
        background: #8426ff;
        border-color: transparent;
    }

    .tabs-box .tab:hover {
        color: #fff;
        background: #8426ff;
        border-color: transparent;
        border: #141414 1px solid;
        transform: scale(0.9);
        animation: jiggle 0.6s infinite;
        overflow-y: visible;
    }

    .presetswrapper {
        max-width: 70%;
    }

        .presetswrapper .presetstabs-box {
            display: flex;
            gap: 12px;
            list-style: none;
            overflow-x: hidden;
            overflow-y: hidden;
            scroll-behavior: smooth;
            max-width: 90%;
        }

    .presetstabs-box.dragging {
        scroll-behavior: auto;
        cursor: grab;
    }

    .presetstabs-box .tab {
        margin: 0px;
        cursor: pointer;
        font-size: 1.18rem;
        white-space: nowrap;
        background: linear-gradient(to left, rgba(94, 0, 225, 0.8), #14141400);
        border: #8426FF 1px solid;
        padding: 13px 20px;
        border-radius: 30px;
        transition: 0.5s all;
        color: white;
        font-family: 'Fredoka One';
    }

    .presetstabs-box .mcatab {
        margin: 0px;
        cursor: pointer;
        font-size: 1.18rem;
        white-space: nowrap;
        background: linear-gradient(to left, rgba(31,179,255,0.5), #14141400);
        border: #26b3ff 1px solid;
        padding: 13px 20px;
        border-radius: 30px;
        transition: 0.5s all;
        color: white;
        font-family: 'Fredoka One';
    }



    .presetstabs-box.dragging .tab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

    .presetstabs-box .tab.active {
        color: #fff;
        background: #8426ff;
        border-color: transparent;
    }

    .presetstabs-box .tab:hover {
        color: #fff;
        background: #8426ff;
        border-color: transparent;
        border: #141414 1px solid;
        transform: scale(0.9);
        animation: jiggle 0.6s infinite;
        overflow-y: visible;
    }

    #autopilotpopupmobile {
        display: none;
    }

    .tabs-box.dragging .mcatab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

    .tabs-box.dragging .autopilottab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

    .tabs-box .mcatab.active {
        color: #fff;
        background: #26b3ff;
        border-color: transparent;
    }

    .tabs-box .autopilottab.active {
        color: #fff;
        background: #00FF5E;
        border-color: transparent;
    }

    .presetstabs-box .imgtab{
        transition: 0.5s all;
        margin: 0px;
        cursor: pointer;
        white-space: nowrap;
        padding: 13px 10px;
    }

    .presetstabs-box.dragging .mcatab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }
    

    .presetstabs-box .mcatab.active {
        color: #fff;
        background: #26b3ff;
        border-color: transparent;
    }

    .tabs-box .imgtab{
        transition: 0.5s all;
        margin: 0px;
        cursor: pointer;
        white-space: nowrap;
        padding: 13px 10px;
    }

    .imgtab img{
        width:300px;
        border-radius: 10px;
    }

    .tabs-box.dragging .imgtab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

        .tabs-box .imgtab:hover{
        transform: scale(0.9);
        animation: jiggle 1s infinite;
        overflow-y: visible;
    }

    .tabs-box .mcatab:hover {
        color: #fff;
        background: #26b3ff;
        border-color: transparent;
        border: #141414 1px solid;
        transform: scale(0.9);
        animation: jiggle 0.6s infinite;
        overflow-y: visible;
    }

    .tabs-box .autopilottab:hover {
        color: #fff;
        background: #00FF5E;
        border-color: transparent;
        border: #141414 1px solid;
        transform: scale(0.9);
        animation: jiggle 0.6s infinite;
        overflow-y: visible;
    }

    .presetstabs-box.dragging .imgtab {
        user-select: none;
        pointer-events: none;
        filter: brightness(0.8);
    }

        .presetstabs-box .imgtab:hover{
        transform: scale(0.9);
        animation: jiggle 1s infinite;
        overflow-y: visible;
    }

    .presetstabs-box .mcatab:hover {
        color: #fff;
        background: #26b3ff;
        border-color: transparent;
        border: #141414 1px solid;
        transform: scale(0.9);
        animation: jiggle 0.6s infinite;
        overflow-y: visible;
    }

    @keyframes jiggle {
        0% {
            transform: rotate(-0.5deg);
        }

        50% {
            transform: rotate(0.5deg);
        }

        100% {
            transform: rotate(-0.5deg);
        }
    }


    @keyframes backgroundgradient {
        0% {
            color: var(--one);
        }

        10% {
            color: var(--one);
        }

        25% {
            color: var(--two);
        }

        35% {
            color: var(--two);
        }

        50% {
            color: var(--three);
        }

        60% {
            color: var(--three);
        }

        75% {
            color: var(--four);
        }

        85% {
            color: var(--four);
        }

        100% {
            color: var(--one);
        }
    }


    @keyframes schedulebackgroundgradient {
        0% {
            background-color: var(--one);
        }

        10% {
            background-color: var(--one);
        }

        25% {
            background-color: var(--two);
        }

        35% {
            background-color: var(--two);
        }

        50% {
            background-color: var(--three);
        }

        60% {
            background-color: var(--three);
        }

        75% {
            background-color: var(--four);
        }

        85% {
            background-color: var(--four);
        }

        100% {
            background-color: var(--one);
        }
    }

    @media only screen and (max-width: 1290px) and (orientation:portrait) {

        #settingsmainpane{
                width:100vw;
            }
            #settingssidebar{
                display:none;
            }


        #clock {
            font-size: 90vw;
        }

        #gear {
            z-index: 100000;
            top: 95%;
            left: 7%;
        }

        #autopilotpopup {
            display: none;
        }

        #autopilotpopupmobile {
            display: block;
        }


        #innergear {
            font-size: 30px;
        }

        .datepicker {
            margin-bottom: 20px;
        }

        #submitdate {
            width: 1in;
        }

        #countdowntitle {
            width: 50%; /* or any other width */
            position: absolute; /* or absolute */
            left: 50%;
            transform: translateX(-50%);
            top: calc(40% - 43px);
            font-size: 20px;
            text-align: center;
            border:none !important;
            border-radius: 30px;
        }
    }

    @media only screen and (min-width: 1300px) {
        #gear {
            top: 95%;
            left: 3%;
        }
    }


    .wrapper2 {
        color: white;
        font-family: 'Fredoka One';
        visibility: hidden;
        position: absolute;
        width: 300px;
        background: rgba(32, 32, 32, 0.52);
        border-radius: 16px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(6.9px);
        -webkit-backdrop-filter: blur(6.9px);
        border: 1px solid rgba(32, 32, 32, 0.67);
        z-index: 1000;
    }

        .wrapper2 .menu2 {
            padding: 10px 12px;
        }



    .content2 .setting {
        display: flex;
        margin-top: -6px;
        cursor: pointer;
        padding: 6px 12px;
    }

    #qrcode img {
        mix-blend-mode: screen;
    }



    *::-webkit-scrollbar {
        width: 16px;
    }

    *::-webkit-scrollbar-track {
        background: #0d0d0d;
    }

    *::-webkit-scrollbar-thumb {
        box-shadow: #8426ff 1px 1px 25px;
        background-color: #8426ff;
        border-radius: 14px;
    }


    .backgroundframe {
        margin: 0px;
        padding: 0px;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        z-index: -14;
        position: inherit;
    }

    .backgroundframe-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -14;
        overflow: hidden;
    }

    .bg-color {
        right: 0;
        top: 0;
        filter: blur(100px);
        z-index: -1;
        mix-blend-mode: luminosity;
        width: 200%;
        position: absolute;
        animation: rotate 35s linear infinite;
    }

    .bg-color-fast {
        right: 0;
        top: 0;
        filter: blur(100px);
        z-index: -1;
        mix-blend-mode: luminosity;
        width: 200%;
        position: absolute;
        animation: rotate 15s linear infinite;
    }

    .bg-color-slow {
        right: 0;
        top: 0;
        filter: blur(100px);
        z-index: -1;
        mix-blend-mode: luminosity;
        width: 200%;
        position: absolute;
        animation: rotate 70s linear infinite;
    }

    .bg-black {
        left: 0;
        bottom: 0;
        filter: blur(100px);
        z-index: -10;
        animation-direction: reverse;
        animation-delay: 10s;
        width: 200%;
        position: absolute;
        animation: rotate 35s linear infinite;
    }

    .bg-black-fast {
        left: 0;
        bottom: 0;
        filter: blur(100px);
        z-index: -10;
        animation-direction: reverse;
        animation-delay: 10s;
        width: 200%;
        position: absolute;
        animation: rotate 15s linear infinite;
    }

    .bg-black-slow {
        left: 0;
        bottom: 0;
        filter: blur(100px);
        z-index: -10;
        animation-direction: reverse;
        animation-delay: 10s;
        width: 200%;
        position: absolute;
        animation: rotate 70s linear infinite;
    }

    @keyframes rotate {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .autopilot-countdown-container {
        position: absolute;
        top: 30%;
        left: 94%;
        display: inline-block;
    }

    .autopilot-countdown-number {
        color: white;
        font-family: 'Fredoka One';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 27px; /* Adjusted for the larger size */
        z-index: 10000;
    }

    .autopilot-countdown-circle {
        transform: rotate(-90deg);
        width: 64px; /* Adjusted for the larger size */
        height: 64px; /* Adjusted for the larger size */
    }

        .autopilot-countdown-circle .outer-circle {
            stroke-dasharray: 182; /* Circumference of the outer circle */
            stroke-dashoffset: 0;
            stroke-width: 6; /* Width of the gray border */
            stroke: #141414; /* Gray border color */
            fill: #141414;
        }

        .autopilot-countdown-circle .progressbarr {
            stroke-dasharray: 170; /* Adjusted for the new circumference */
            stroke-dashoffset: 170;
            stroke-width: 4; /* Adjusted for the inset effect */
            stroke: #01fb5d; /* Progress bar color */
            fill: #141414;
            stroke-linecap: round; /* Rounds out the start and end of the stroke */
            stroke-linejoin: round;
        }

        input[type="input"]{
            width:90%;
            margin:5%;
            margin-top:0;
            background: rgba(47, 47, 47, 0.5);
            border-radius: 30px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(9.5px);
            -webkit-backdrop-filter: blur(9.5px);
            border: 1px solid rgba(47, 47, 47, 0.3);
            color:white;
            padding:10px;
            height:50px;
        }

        input[type="input"] + button {
            position: absolute;
            right: 9%;
            top: 10;
            height: 30;
            background: rgba(132, 38, 255, 0.12);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(11.9px);
            -webkit-backdrop-filter: blur(11.9px);
            border: 1px solid #8426FF;
            color:white;
        }
        
        /*countdown schedule*/
        .schedule-viewer {
            height: 100vh;
            overflow-y: auto;
            /*background: #141414;*/
            /* background: linear-gradient(to right, #B500FF, #8F00FF, #00A0FF); */
            display: flex;
            overflow:hidden;
            flex-direction: column;
            top:0;
            position:absolute;
            width:100vw;
            margin:0 !important;
            padding:0 !important;
        }

        #schedule{
            display:flex;
            font-family: var(--comptypeface);
            position: fixed;
            top: 0;
            left:0;
            height:100vh;
            width: 100%;
            z-index: 1000;
            color:white !important;
            margin:0 !important;
            padding:0 !important;
        }

        
        .schedule-current-class {
            color:white;
            flex: 1;
            display: flex;
            justify-content: space-between;
            /*background: #c82333;*/
            align-items: center;
            padding: 20px;
            position: relative;
            transition:1s all;
        }
        .schedule-class-title {
            margin-top:3%;
            margin-bottom:3%;
            margin-left:20px;
            font-size: 5em;
            font-family: var(--typeface);;
        }
        .schedule-time-remaining {
            text-align: right;
            margin-right:20px;
            font-family: var(--comptypeface)
        }
        .schedule-time {
            font-size: 4em;
        }
        .schedule-remaining-text {
            font-size: 1.5em;
        }
        .schedule-progress-bar {
            height: 7px;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        .schedule-progress {
            height: 100%;
            background: #141414e5;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(75px);
            -webkit-backdrop-filter: blur(75px);
            width: 0;
            transition: width 1s linear;
            border-top-right-radius: 20px;
        }
        .schedule-upcoming-class {
            background: rgba(20, 20, 20, 0.83);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(75px);
            -webkit-backdrop-filter: blur(75px);
            border-bottom:3px solid #14141491;
            padding:15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family:var(--comptypeface);
        }
        .schedule-upcoming-class-title {
            font-size: 1.5em;
            font-weight: bold;
            color:white;
            margin-left:20px;
        }
        .schedule-upcoming-class-time {
            text-align: right;
            color:white;
            margin:20px 20px 20px 0px;
        }
        .schedule-upcoming-class-time .fa-regular{
            margin-right:5px;
        }


        .schedule-editor {
            font-family: "Dosis";
        }
        .schedule-container {
            max-width: 80%;
            margin: auto;
            background: transparent;
            padding: 20px;
            border-radius: 20px;
		font-family: "Dosis";
        }

        .schedule-container input{
            color: white;
        border-radius: 20px;
        padding: 20px;
        font-size: 20px;
        font-weight: 100;
        outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        font-family: 'Fredoka One';
        border: 0px transparent;
        transition: 0.5s all;
        }

        .schedule-container select{
            color: white;
        border-radius: 20px;
        padding: 20px;
        font-size: 20px;
        font-weight: 100;
        outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        font-family: "Dosis";
        border: 0px transparent;
        transition: 0.5s all;
        }
        .schedule-form-group {
            margin-bottom: 15px;
        }
        #schedule-eventList, #schedule-exceptionList {
            list-style-type: none;
            padding: 0;
        }
        .schedule-event-item, .schedule-exception-item {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .schedule-event-item button, .schedule-exception-item button {
            background-color: #dc3545;
            padding: 5px 10px;
            margin-top: 10px;
            width: auto;
        }
        .schedule-event-item button:hover, .schedule-exception-item button:hover {
            background-color: #c82333;
        }
        .schedule-exception-day {
            margin-bottom: 20px;
        }
        .schedule-editor-section {
            margin-bottom: 20px;
        }
        .schedule-collapsible {
            outline: 1px solid #8426ff;
        background: linear-gradient(to left, rgba(40,23,64,88), #14141400);
        color:white;
        border-radius: 20px 20px 20px 20px;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            font-size: 15px;
            transition:0.2s border-radius;
        }
        .active, .schedule-collapsible:hover {
            background: linear-gradient(to left, rgba(40,23,64,100), #14141400);
        }
        .active{
            border-radius: 20px 20px 0 0;
        }
        .schedule-content{
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: transparent;
            outline: 0px solid #8426ff;
        }
        .active + .schedule-content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: #14141400;
            outline: 1px solid #8426ff;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }


    .betatag {
        background: linear-gradient(#8c52ff, #ff914d);
        border-radius:20px;
        padding:5px 10px 5px;
        color:white;
        font-size:20px;
        margin-left:10px;
    }

    .cookiebanner{
    position:fixed !important;
    top:50px;
    left:12.5vw;
    color:white;
    border-radius: 21px 20px 20px 21px;
    z-index:1000000;
    background: rgb(0, 0, 0);
    height: 80px auto;
    width:75vw;
    box-shadow: 0.3px 0.5px 0.7px rgba(0,0,0,0.5),
    0.8px 1.6px 2px -0.8px rgba(0,0,0,0.5),
    2.1px 4.1px 5.2px -1.7px rgba(0,0,0,0.5),
    5px 10px 12.6px -2.5px rgba(0,0,0,0.5);
}


.cookiebanner p{
    margin:none;
    line-height:1;
    margin-right:20px;
}

.cookiebanner a{
    margin:0px;
}

.cookiebanner img {
    float: left;
    border-radius: 20px 0 0 20px;
    height: 100%; /* Child image will stretch to fill the parent's height */
    width: auto;  /* Maintain aspect ratio */
    margin-right:20px;
    display:none;
    max-height: 200px;
}

.failedcookiebanner{
    animation: settingslocked 0.4s linear;
}

@keyframes settingslocked {
    0% { transform: translate(22.5px); }
    20% { transform: translate(-22.5px); }
    40% { transform: translate(16.25px); }
    60% { transform: translate(-16.25px); }
    80% { transform: translate(14px); }
    100% { transform: translate(0px); }
}
</style>



<script>

	//So pretty much there was a weird bug where CSS zoom works differently from Chrome VS Safari, so I needed to target each one seperately. Safari would scale each item to 75% as if someone used the browser zoom buttons. Chrome would scale the whole page, only using 75% of the space, leaving a border.

	if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
  // If user is using Safari
  const style = document.createElement('style');
  style.innerHTML = `
    @media only screen and (max-width: 1290px) and (orientation:portrait) {
       body {
          zoom: 75%;
       }
    }
  `;
  document.head.appendChild(style);
}

	
window.onload = function() {
    const cookiebanner = document.getElementById('cookie-banner');
    const cookiebannerimage = document.getElementById('cookiebannerimg');
    // Use setTimeout to ensure the banner is fully rendered
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
        cookiebannerimage.style.display = 'block'; // Show the image after setting the height
    }, 1); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 3); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 5); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 10); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 20); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 50); // Adjust the timeout duration if necessary
    setTimeout(() => {
        const cookiebannerHeight = cookiebanner.offsetHeight;
        cookiebannerimage.style.height = `${cookiebannerHeight}px`;
    }, 100); // Adjust the timeout duration if necessary

    /*
    basically, after 1 ms we adjust the height of the image to match the height of the banner
    then we show the image and repeat at 3ms to account for if the banner changed size (due to the image)
    and so on until 1s. This is to ensure the image is the same size as the banner even if the first
    couple iterations mess with the text wrapping and cange the size of the banner
    */
    
};


        document.addEventListener("DOMContentLoaded", function () {
        var cookieBanner = document.getElementById("cookie-banner");
        var acceptButton = document.getElementById("accept-cookies");

        if (!getCookie("cookiesAccepted")) {
            cookieBanner.style.display = "";
        }
        else{
            cookieBanner.style.display = "none";
        }

        acceptButton.addEventListener("click", function () {
            setCookie("cookiesAccepted", "True", "70")
            cookieBanner.style.display = "none";
            location.reload();
        });
    });

    //onload url parameter translation into the correlating customization settings

    //backgrounds
    var bgstring = "none"; //declaring bgstring to none at the very beginning so it's able to be changed anywhere
    if (parameter('atc')) {
        bgstring = parameter('atc'); //if there is an animated text countdown background, set that to bg string
    }
    else {
        bgstring = "none"; //hypothetically not necessary since that's already the value but there just in case
    }
    document.body.scrollTop = document.documentElement.scrollTop = 0; //sometimes browsers are weird and you start already scrolled down a little

    //text colors
    var css = document.querySelector(':root'); //easily allowing JS to reference CSS variables
    if (parameter('colorone')) { 
        if (parameter('colorone') == "null") {
            console.log("Colors(1) could not be imported properly."); //helps debug
        }
        else {
            var coloronetouse = '#' + parameter('colorone'); //in the param, the hex code is stored without the #, this is adding it back
            document.getElementById("color1").value = coloronetouse; //sets the color picker in settings to the corresponding color
            css.style.setProperty('--one', coloronetouse); //sets the CSS variable to the corresponding color
        }

    }
    if (parameter('colortwo')) { //see colorone for docs
        if (parameter('colortwo') == "null") {
            console.log("Colors(2) could not be imported properly.");
        }
        else {
            var colortwotouse = '#' + parameter('colortwo');
            document.getElementById("color2").value = colortwotouse;
            css.style.setProperty('--two', colortwotouse);
        }
    }
    if (parameter('colorthree')) { //see colorone for docs
        if (parameter('colorthree') == "null") {
            console.log("Colors(3) could not be imported properly.");
        }
        else {
            var colorthreetouse = '#' + parameter('colorthree');
            document.getElementById("color3").value = colorthreetouse;
            css.style.setProperty('--three', colorthreetouse);
        }
    }
    if (parameter('colorfour')) { //see colorone for docs
        if (parameter('colorfour') == "null") {
            console.log("Colors(4) could not be imported properly.");
        }
        else {
            var colorfourtouse = '#' + parameter('colorfour');
            document.getElementById("color4").value = colorfourtouse;
            css.style.setProperty('--four', colorfourtouse);
        }
    }

    //set up countdown schedules
    if(parameter("schedule") !== "null" && parameter("schedule")){  
        document.getElementById("clock").style.display = "none"; //hide clock
        document.getElementById("countdowntitle").style.display = "none"; //hide title
	document.getElementById("optionsdatecontainer").style.display = "none"; //hide end date area of options
	document.getElementById("optionsendingcontainer").style.display = "none"; //hide ending options area of options	
	document.getElementById("optionsendinganchor").style.opacity = "0.5"; //grey out ending options anchor 	
	document.getElementById("optionsprogresscontainer").style.display = "none"; //hide ending options area of options
	document.getElementById("optionsprogressanchor").style.opacity = "0.5"; //grey out progress options anchor	
	document.getElementById("optionsonlyincludecontainer").style.display = "none"; //hide only include area of options
	document.getElementById("optionsoianchor").style.opacity = "0.5"; //grey out progress only include anchor	
        document.getElementById("schedule").style.display = ""; //show schedule

        if(!parameter("date")){
            document.getElementById("autopilotpopup").remove(); //removes the Autopilot popup if a schedule exists
            document.getElementById("autopilotpopupmobile").remove(); //same with mobile Autopilot popup   
        }
    }
    else{
        document.getElementById("schedule").style.display = "none"; //hide schedule
        document.getElementById("countdowntitle").style.display = ""; //show schedule
        document.getElementById("clock").style.display = ""; //show clock
    }

    //fonts or typefaces
    if (parameter('typeface')) {
        if (decodeURIComponent(parameter('typeface')) == "Fredoka One") { //decode URI Component simply replaces %20 with a space, etc
            FontFredoka('auto'); //calls the function for said font
        }
        else if (decodeURIComponent(parameter('typeface')) == "Poppins") {
            FontPoppins('auto');
        }
        else if (decodeURIComponent(parameter('typeface')) == "Yeseva One") {
            FontDMSerif('auto'); //fallback for old depreciated font option Yeseva, replaced by DM Serif Display
        }
        else if (decodeURIComponent(parameter('typeface')) == "DMSerif") {
            FontDMSerif('auto');
        }
        else if (decodeURIComponent(parameter('typeface')) == "Orbitron") {
            FontOrbitron('auto');
        }
    }
    else {
        css.style.setProperty('--typeface', "Fredoka One"); //if no parameter is found for the typeface, simply set it to the default (Fredoka One)
    }

    //date
    if (parameter('date')) {
        if(parameter('date').includes('T') && parameter('date').includes(':') ){ //if there is an included time, it will be saved as 12/34/56T12:34, this is checking for the T and the :
           document.querySelector(".datepicker").value = parameter('date'); 
        }
        else{
            document.querySelector(".datepicker").value = parameter('date') + 'T00:00'; //if there is no included time, and it's just 12/34/56 for example, it adds the T00:00 for midnight. backwards compatibility for before time was supported
        }
        var countDownDate = new Date(document.querySelector(".datepicker").value); //sets the datepicker in settings to the correct date + time

        document.getElementById("autopilotpopup").remove(); //removes the Autopilot popup if a date exists
        document.getElementById("autopilotpopupmobile").remove(); //same with mobile Autopilot popup
    }
    else { //if there is no date parameter
        const savedLinks = localStorage.getItem("dashboardsaved"); //get dashboard save data

        if((savedLinks) && (savedLinks !== '[]' && savedLinks !== '' && savedLinks !== 'null')){ //if countdowns have been saved
            window.location.href = "https://michaeldors.com/mcacountdown/countdowndashboard.html"; //take the user to their dashboard
        }
        else{ //no countdowns have been saved; new user experience with Autopilot
            var now = new Date(); //getting the current date
            var nextyear = new Date().getFullYear() + 1; //setting up a next year variable
            var thisyear = new Date().getFullYear(); //setting up a this year variable

            //new years
            var newyearsthisyear = new Date(thisyear + "-01-01T00:00"); //setting up a this year variable for when new years day is in the current year
            if (newyearsthisyear - now < 0) { //if it's already passed
                newyearsday = new Date(nextyear + '-01-01T00:00'); //then set the countdown to new year's next year
            } else { //otherwise, if it's not passed yet
                newyearsday = new Date(thisyear + '-01-01T00:00'); //set the countdown to new year's this year
            }

            //valentines
            var valentinesthisyear = new Date(thisyear + "-02-14T00:00"); //see new years for docs
            if (valentinesthisyear - now < 0) {
                valentinessday = new Date(nextyear + '-02-14T00:00');
            } else {
                valentinessday = new Date(thisyear + '-02-14T00:00');
            }

            //easter
            var epoch = 2444238.5, elonge = 278.83354, elongp = 282.596403, eccent = .016718, sunsmax = 149598500, sunangsiz = .533128, mmlong = 64.975464, mmlongp = 349.383063, mlnode = 151.950429, minc = 5.145396, mecc = .0549, mangsiz = .5181, msmax = 384401, mparallax = .9507, synmonth = 29.53058868, lunatbase = 2423436, earthrad = 6378.16, PI = 3.141592653589793, epsilon = 1e-6; function sgn(x) { return x < 0 ? -1 : x > 0 ? 1 : 0 } function abs(x) { return x < 0 ? -x : x } function fixAngle(a) { return a - 360 * Math.floor(a / 360) } function toRad(d) { return d * (PI / 180) } function toDeg(d) { return d * (180 / PI) } function dsin(x) { return Math.sin(toRad(x)) } function dcos(x) { return Math.cos(toRad(x)) } function toJulianTime(date) { var year, month, day; year = date.getFullYear(); var m = (month = date.getMonth() + 1) > 2 ? month : month + 12, y = month > 2 ? year : year - 1, d = (day = date.getDate()) + date.getHours() / 24 + date.getMinutes() / 1440 + (date.getSeconds() + date.getMilliseconds() / 1e3) / 86400, b = isJulianDate(year, month, day) ? 0 : 2 - y / 100 + y / 100 / 4; return Math.floor(365.25 * (y + 4716) + Math.floor(30.6001 * (m + 1)) + d + b - 1524.5) } function isJulianDate(year, month, day) { if (year < 1582) return !0; if (year > 1582) return !1; if (month < 10) return !0; if (month > 10) return !1; if (day < 5) return !0; if (day > 14) return !1; throw "Any date in the range 10/5/1582 to 10/14/1582 is invalid!" } function jyear(td, yy, mm, dd) { var z, f, alpha, b, c, d, e; return f = (td += .5) - (z = Math.floor(td)), b = (z < 2299161 ? z : z + 1 + (alpha = Math.floor((z - 1867216.25) / 36524.25)) - Math.floor(alpha / 4)) + 1524, c = Math.floor((b - 122.1) / 365.25), d = Math.floor(365.25 * c), e = Math.floor((b - d) / 30.6001), { day: Math.floor(b - d - Math.floor(30.6001 * e) + f), month: Math.floor(e < 14 ? e - 1 : e - 13), year: Math.floor(mm > 2 ? c - 4716 : c - 4715) } } function jhms(j) { var ij; return j += .5, ij = Math.floor(86400 * (j - Math.floor(j)) + .5), { hour: Math.floor(ij / 3600), minute: Math.floor(ij / 60 % 60), second: Math.floor(ij % 60) } } function jwday(j) { return Math.floor(j + 1.5) % 7 } function meanphase(sdate, k) { var t, t2; return 2415020.75933 + synmonth * k + 1178e-7 * (t2 = (t = (sdate - 2415020) / 36525) * t) - 155e-9 * (t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2) } function truephase(k, phase) { var t, t2, t3, pt, m, mprime, f, apcor = !1; if (pt = 2415020.75933 + synmonth * (k += phase) + 1178e-7 * (t2 = (t = k / 1236.85) * t) - 155e-9 * (t3 = t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2), m = 359.2242 + 29.10535608 * k - 333e-7 * t2 - 347e-8 * t3, mprime = 306.0253 + 385.81691806 * k + .0107306 * t2 + 1236e-8 * t3, f = 21.2964 + 390.67050646 * k - .0016528 * t2 - 239e-8 * t3, phase < .01 || abs(phase - .5) < .01 ? (pt += (.1734 - 393e-6 * t) * dsin(m) + .0021 * dsin(2 * m) - .4068 * dsin(mprime) + .0161 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0104 * dsin(2 * f) - .0051 * dsin(m + mprime) - .0074 * dsin(m - mprime) + 4e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .001 * dsin(2 * f - mprime) + 5e-4 * dsin(m + 2 * mprime), apcor = !0) : (abs(phase - .25) < .01 || abs(phase - .75) < .01) && (pt += (.1721 - 4e-4 * t) * dsin(m) + .0021 * dsin(2 * m) - .628 * dsin(mprime) + .0089 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0079 * dsin(2 * f) - .0119 * dsin(m + mprime) - .0047 * dsin(m - mprime) + 3e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .0021 * dsin(2 * f - mprime) + 3e-4 * dsin(m + 2 * mprime) + 4e-4 * dsin(m - 2 * mprime) - 3e-4 * dsin(2 * m + mprime), pt += phase < .5 ? .0028 - 4e-4 * dcos(m) + 3e-4 * dcos(mprime) : 4e-4 * dcos(m) - .0028 - 3e-4 * dcos(mprime), apcor = !0), !apcor) throw "Error calculating moon phase!"; return pt } function phasehunt(sdate, phases) { var adate, k1, k2, nt1, nt2, yy, mm, dd, jyearResult = jyear(adate = sdate - 45, yy, mm, dd); for (yy = jyearResult.year, mm = jyearResult.month, dd = jyearResult.day, adate = nt1 = meanphase(adate, k1 = Math.floor(12.3685 * (yy + 1 / 12 * (mm - 1) - 1900))); nt2 = meanphase(adate += synmonth, k2 = k1 + 1), !(nt1 <= sdate && nt2 > sdate);)nt1 = nt2, k1 = k2; return phases[0] = truephase(k1, 0), phases[1] = truephase(k1, .25), phases[2] = truephase(k1, .5), phases[3] = truephase(k1, .75), phases[4] = truephase(k2, 0), phases } function kepler(m, ecc) { var e, delta; e = m = toRad(m); do { e -= (delta = e - ecc * Math.sin(e) - m) / (1 - ecc * Math.cos(e)) } while (abs(delta) > epsilon); return e } function getMoonPhase(julianDate) { var Day, N, M, Ec, Lambdasun, ml, MM, MN, Ev, Ae, MmP, mEc, lP, lPP, NP, y, x, MoonAge, MoonPhase, MoonDist, MoonDFrac, MoonAng, F, SunDist, SunAng; return N = fixAngle(360 / 365.2422 * (Day = julianDate - epoch)), Ec = kepler(M = fixAngle(N + elonge - elongp), eccent), Ec = Math.sqrt((1 + eccent) / (1 - eccent)) * Math.tan(Ec / 2), Lambdasun = fixAngle((Ec = 2 * toDeg(Math.atan(Ec))) + elongp), F = (1 + eccent * Math.cos(toRad(Ec))) / (1 - eccent * eccent), SunDist = sunsmax / F, SunAng = F * sunangsiz, ml = fixAngle(13.1763966 * Day + mmlong), MM = fixAngle(ml - .1114041 * Day - mmlongp), MN = fixAngle(mlnode - .0529539 * Day), MmP = MM + (Ev = 1.2739 * Math.sin(toRad(2 * (ml - Lambdasun) - MM))) - (Ae = .1858 * Math.sin(toRad(M))) - .37 * Math.sin(toRad(M)), lPP = (lP = ml + Ev + (mEc = 6.2886 * Math.sin(toRad(MmP))) - Ae + .214 * Math.sin(toRad(2 * MmP))) + .6583 * Math.sin(toRad(2 * (lP - Lambdasun))), NP = MN - .16 * Math.sin(toRad(M)), y = Math.sin(toRad(lPP - NP)) * Math.cos(toRad(minc)), x = Math.cos(toRad(lPP - NP)), toDeg(Math.atan2(y, x)), NP, toDeg(Math.asin(Math.sin(toRad(lPP - NP)) * Math.sin(toRad(minc)))), MoonAge = lPP - Lambdasun, MoonPhase = (1 - Math.cos(toRad(MoonAge))) / 2, MoonDist = msmax * (1 - mecc * mecc) / (1 + mecc * Math.cos(toRad(MmP + mEc))), MoonAng = mangsiz / (MoonDFrac = MoonDist / msmax), mparallax / MoonDFrac, { moonIllumination: MoonPhase, moonAgeInDays: synmonth * (fixAngle(MoonAge) / 360), distanceInKm: MoonDist, angularDiameterInDeg: MoonAng, distanceToSun: SunDist, sunAngularDiameter: SunAng, moonPhase: fixAngle(MoonAge) / 360 } } function getMoonInfo(date) { return null == date ? { moonPhase: 0, moonIllumination: 0, moonAgeInDays: 0, distanceInKm: 0, angularDiameterInDeg: 0, distanceToSun: 0, sunAngularDiameter: 0 } : getMoonPhase(toJulianTime(date)) } function getEaster(year) { var previousMoonInfo, moonInfo, fullMoon = new Date(year, 2, 21), gettingDarker = void 0; do { previousMoonInfo = getMoonInfo(fullMoon), fullMoon.setDate(fullMoon.getDate() + 1), moonInfo = getMoonInfo(fullMoon), void 0 === gettingDarker ? gettingDarker = moonInfo.moonIllumination < previousMoonInfo.moonIllumination : gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination && (gettingDarker = !1) } while (gettingDarker && moonInfo.moonIllumination < previousMoonInfo.moonIllumination || !gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination); for (fullMoon.setDate(fullMoon.getDate() - 1); 0 !== fullMoon.getDay();)fullMoon.setDate(fullMoon.getDate() + 1); return fullMoon.toISOString().split('T')[0] }
            //the above line calculates the moon's path to figure out when Easter is

            var easterthisyear = new Date(getEaster(thisyear) + "T00:00"); //see new years for docs, except it's calculating easter as it's not a set date
            if (easterthisyear - now < 0) {
                easterday = new Date(getEaster(nextyear) + "T00:00");
            } else {
                easterday = new Date(getEaster(thisyear) + "T00:00");
            }

            //independence
            var independencethisyear = new Date(thisyear + "-07-04T00:00"); //see new years for docs
            if (independencethisyear - now < 0) {
                independenceday = new Date(nextyear + '-07-04T00:00');
            } else {
                independenceday = new Date(thisyear + '-07-04T00:00');
            }

            //halloween
            var halloweenthisyear = new Date(thisyear + "-10-31T00:00"); //see new years for docs
            if (halloweenthisyear - now < 0) {
                halloweenday = new Date(nextyear + '-10-31T00:00');
            } else {
                halloweenday = new Date(thisyear + '-10-31T00:00');
            }

            //thanksgiving
            var thanksgivingthisyear = new Date(formatDate(getDateString(thisyear, 10, 3, 4))); //10th month, 3rd week, 4th day (thursday)
            if (thanksgivingthisyear - now < 0) { //see new years for docs
                thanksgivingday = new Date(formatDate(getDateString(nextyear, 10, 3, 4)));
            }
            else {
                thanksgivingday = new Date(formatDate(getDateString(thisyear, 10, 3, 4)));
            }

            //christmas
            var christmasthisyear = new Date(thisyear + "-12-25T00:00"); //see new years for doce
            if (christmasthisyear - now < 0) {
                christmasday = new Date(nextyear + '-12-25T00:00');
            } else {
                christmasday = new Date(thisyear + '-12-25T00:00');
            }


            // List of holiday dates
            const holidays = [
                {
                    name: 'newyear',
                    date: newyearsday
                },
                {
                    name: 'valentines',
                    date: valentinessday
                },
                {
                    name: 'easter',
                    date: easterday
                },
                {
                    name: 'independence',
                    date: independenceday
                },
                {
                    name: 'halloween',
                    date: halloweenday
                },
                {
                    name: 'thanksgiving',
                    date: thanksgivingday
                },
                {
                    name: 'christmas',
                    date: christmasday
                }
            ];

            // Now that all the holidays are in a list and we've calculated when they occur next, it'll find which is coming up the soonest
            var nextHoliday = holidays.reduce(function (closest, holiday) {
                var timeDiff = holiday.date.getTime() - now.getTime();
                return timeDiff > 0 && timeDiff < (closest.date.getTime() - now.getTime()) ? holiday : closest;
            }, holidays[0]);


            switch (nextHoliday.name) {
                case 'newyear':
                    document.getElementById("autopilotprediction").innerHTML = "New Year's Day"; //set Autopilot to tell the user that NYD is next
                    document.getElementById("autopilotpredictionmobile").innerHTML = "New Year's Day"; //same for Autopilot mobile

                    NYD(); //and run the NYD function to actually set the date and such to NYD
                    break;
                case 'valentines': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Valentine's Day";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Valentine's Day";

                    VD();
                    break;
                case 'easter': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Easter";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Easter";

                    EASTER();
                    break;
                case 'independence': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Independence Day";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Independence Day";

                    ID();
                    break;
                case 'halloween': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Halloween";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Halloween";

                    H();
                    break;
                case 'thanksgiving': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Thanksgiving";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Thanksgiving";

                    T();
                    break;
                case 'christmas': //see NYD for docs
                    document.getElementById("autopilotprediction").innerHTML = "Christmas";
                    document.getElementById("autopilotpredictionmobile").innerHTML = "Christmas";

                    C();
                    break;
                default:
                    // handle cases where nextHoliday.name doesn't match any of the above
                    console.error('Unexpected holiday name:', nextHoliday.name);
            }
        }
    }

    if(parameter("schedule") !== "null" && parameter("schedule")){
        document.querySelector(".datepicker").value = '9999-12-30T00:00';
    }

    //countdown title
    if (parameter('title')) { 
        document.getElementById("countdowntitle").value = decodeURIComponent(parameter('title')); //set the front-facing countdown title input to the parameter value, decoding all %20s and such
        setcountdowntitle("front"); //tell the setcountdowntitle function to set the back (settings) to the same. sending which it came from the the function, not which to send it to
    }

    //bg again this time to finish the job
    var bgstring = "none";
    if (parameter('atc') && parameter('atc') != "none" && parameter('atc') != "undefined") { //checking it has a good value
        setbg(parameter('atc'), 'auto'); //setbg function takes the number and sets it to that bg, auto tells it that it was run not from settings and not to setcountdowngeneral
        bgstring = parameter('atc'); //set the var to the param
    }
    else {
        bgstring = 'none';
        enablecolor(); //make the color pickers in settings not greyed out anymore
        document.getElementById("animatedbackground").style.display = "none"; //remove the rotating blurred images that would hold the bgs
        document.getElementById("clock").classList.add("clock"); //make the clock normal
        document.getElementById("clock").classList.remove("staticclock"); //not just white clock
        SetCountDowngeneral(); //set the changes
    }

        //countdown schedule styling
        if(parameter("schedule") !== "null" && parameter("atc") == "none"){
            document.getElementById("schedule-currentClass").classList.add("schedulebgcolored");
        }
        else{
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
        }

    //animation speed toggle
    document.querySelector('#searchTypeToggle').addEventListener('click', function (event) {

        if (event.target.tagName.toLowerCase() == 'input') {

            let input = event.target;
            let slider = this.querySelector('div');
            let labels = this.querySelectorAll('label');

            slider.style.transform = `translateX(${input.dataset.location})`;
            labels.forEach(function (label) {
                if (label == input.parentElement) {
                    label.classList.add('selected');
                } else {
                    label.classList.remove('selected');
                }
            });

            if (event.target == document.getElementById("speed1")) {
                eraseCookie('speed2');
                eraseCookie('speed3');
                setCookie('speed1', 'true', '70');
                speed1();
            }
            if (event.target == document.getElementById("speed2")) {
                eraseCookie('speed1');
                eraseCookie('speed3');
                setCookie('speed2', 'true', '70');
                speed2();
            }
            if (event.target == document.getElementById("speed3")) {
                eraseCookie('speed2');
                eraseCookie('speed1');
                setCookie('speed3', 'true', '70');
                speed3();
            }
        }

    });


    function speed1() {
        if (!isNaN(parameter("atc"))) {
            document.getElementById("clock").classList.add("staticclock");
            document.getElementById("bg1").classList.add("bg-color");
            document.getElementById("bg1").classList.remove("bg-color-slow");
            document.getElementById("bg1").classList.remove("bg-color-fast");
            document.getElementById("bg2").classList.add("bg-black");
            document.getElementById("bg2").classList.remove("bg-black-slow");
            document.getElementById("bg2").classList.remove("bg-black-fast");
        }
        else {
            document.getElementById("clock").classList.remove("clockslow");
            document.getElementById("clock").classList.remove("clockfast");
            document.getElementById("clock").classList.add("clock");
        }

        if(parameter("schedule") !== "null" && parameter("atc") == "none"){
            document.getElementById("schedule-currentClass").classList.add("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredslow");
        }
        else{
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredslow");
        }
    }
    function speed2() {
        if (!isNaN(parameter("atc"))) {
            document.getElementById("clock").classList.add("staticclock");
            document.getElementById("bg1").classList.remove("bg-color");
            document.getElementById("bg1").classList.add("bg-color-slow");
            document.getElementById("bg1").classList.remove("bg-color-fast");
            document.getElementById("bg2").classList.remove("bg-black");
            document.getElementById("bg2").classList.add("bg-black-slow");
            document.getElementById("bg2").classList.remove("bg-black-fast");
        }
        else {
            document.getElementById("clock").classList.add("clockslow");
            document.getElementById("clock").classList.remove("clockfast");
            document.getElementById("clock").classList.remove("clock");
        }

        if(parameter("schedule") !== "null" && parameter("atc") == "none"){
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.add("schedulebgcoloredslow");
        }
        else{
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredslow");
        }
    }
    function speed3() {
        if (!isNaN(parameter("atc"))) {
            document.getElementById("clock").classList.add("staticclock");
            document.getElementById("bg1").classList.remove("bg-color");
            document.getElementById("bg1").classList.remove("bg-color-slow");
            document.getElementById("bg1").classList.add("bg-color-fast");
            document.getElementById("bg2").classList.remove("bg-black");
            document.getElementById("bg2").classList.remove("bg-black-slow");
            document.getElementById("bg2").classList.add("bg-black-fast");
        }
        else {
            document.getElementById("clock").classList.remove("clockslow");
            document.getElementById("clock").classList.add("clockfast");
            document.getElementById("clock").classList.remove("clock");
        }

        if(parameter("schedule") !== "null" && parameter("atc") == "none"){
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.add("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredslow");
        }
        else{
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcolored");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredfast");
            document.getElementById("schedule-currentClass").classList.remove("schedulebgcoloredslow");
        }
    }

    updateoptions();

    document.getElementById("body").style.overflowY = 'hidden';
    document.getElementById("gear").classList.remove("hidden");

    function setCookie(name, value, days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }
    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    }


    function SetCountDowngeneral() { //gets called quite a bit, updates all settings and parameters to match the current state
        countDownDate = new Date(document.querySelector(".datepicker").value);
        var css = document.querySelector(':root');
        var color1 = document.getElementById("color1").value; //get the color values
        var color2 = document.getElementById("color2").value;
        var color3 = document.getElementById("color3").value;
        var color4 = document.getElementById("color4").value;
        css.style.setProperty('--one', color1); //set the color values as CSS vars
        css.style.setProperty('--two', color2);
        css.style.setProperty('--three', color3);
        css.style.setProperty('--four', color4);

        var color1normalized = color1.replace("#", ""); //remove the #s from the color params to get them ready
        var color2normalized = color2.replace("#", "");
        var color3normalized = color3.replace("#", "");
        var color4normalized = color4.replace("#", "");

        var cdtitle = document.getElementById("countdowntitle").value; //set the title

        var refresh = window.location.protocol + "//" + window.location.host + window.location.pathname + '?date=' + document.querySelector(".datepicker").value + '&colorone=' + color1normalized + '&colortwo=' + color2normalized + '&colorthree=' + color3normalized + '&colorfour=' + color4normalized + '&typeface=' + css.style.getPropertyValue('--typeface') + '&atc=' + bgstring + '&title=' + cdtitle + '&schedule=' + parameter('schedule');
        window.history.pushState({ path: refresh }, '', refresh); //create and push a new URL

        document.getElementById("linkinput").value = refresh; //refresh the link
        makeQR(); //refresh the QR code
    }

    function parameter(name) { //returns the value of the parameter it's sent
        var query = window.location.search.substring(1);
        var parameters = query.split('&');
        for (var i = 0; i < parameters.length; i++) {
            var pair = parameters[i].split('=');
            if (pair[0] == name) {
                return pair[1];
            }
        }
        return null;
    }

    //memory saver 
    document.addEventListener('visibilitychange', function () { //when the tab changes focus state
        if (document.hidden) { //if the tab is hidden
            if (getCookie('memsav')) { //if memory saver is enabled
                clearInterval(x); //kill the countdown
                document.getElementById("clock").remove(); //remove the clock element as it's no longer needed
                document.getElementById("unfocused").classList.remove("hidden"); //add the memory saver popup even though it disappears when the tab is back and nobody is humanly fast enough to read it
            }
        }

        if (!document.hidden && getCookie('memsav')) { //if the tab is gone back to and memory saver is on
            location.reload(); //reload the tab
        }

    }, false);

    //settings
    function settings() {
        if(getCookie("cookiesAccepted")){

        if (document.getElementById("autopilotpopup")) {
            document.getElementById("autopilotpopup").remove();
        } //if settings is opened while the autpilot popup is still up, get rid of it

        if (document.getElementById("autopilotpopupmobile")) {
            document.getElementById("autopilotpopupmobile").remove();
        } //same but autopilot mobile

        if (document.getElementById("settings").classList.contains("hidden")) { //if settings is closed (Being opened)
            document.getElementById("schedule").style.display = "none"; //hide schedule
            document.getElementById("settings").classList.remove("hidden"); //unhide settings
            document.getElementById("clock").style.display = "none"; //hide clock
            document.getElementById("schedule").style.display = "none"; //hide schedule
            document.getElementById("countdowntitle").style.display = "none"; //hide title
            document.getElementById("gear").classList.add("hidden"); //hide settings icon
            document.getElementById("innergear").classList.add("hidden"); //hide inner settings icon
            document.getElementById("preloader").classList.add("hidden"); //hide loading screen?
            document.getElementById("unfocused").classList.add("hidden"); //hide memsave popup
            document.getElementById("body").style.overflowY = ''; //allow scrolling
            document.body.scrollTop = document.documentElement.scrollTop = 0; //scroll to top for good measure
        }
        else { //if settings is already opened (Being closed)
            if(parameter("schedule") != "null"){ //if user is using Countdown Schedule
                document.getElementById("schedule").style.display = ""; //unhide schedule
                document.getElementById("clock").style.display = "none"; //hide clock
                document.getElementById("countdowntitle").style.display = "none"; //hide title
            }else{ //user is not using Countdown Schedule
                document.getElementById("clock").style.display = ""; //unhide clock
                document.getElementById("schedule").style.display = "none"; //hide schedule
                document.getElementById("countdowntitle").style.display = ""; //unhide title
                document.getElementById("schedule").style.display = "none"; //unhide schedule
            }
            document.getElementById("settings").classList.add("hidden"); //hide settings
            document.getElementById("gear").classList.remove("hidden"); //unhide gear icon
            document.getElementById("innergear").classList.remove("hidden"); //unhide inner settings icon
            document.getElementById("preloader").classList.add("hidden"); //hide loading screen?
            document.getElementById("unfocused").classList.add("hidden"); //hide memsave popup
            document.getElementById("body").style.overflowY = 'hidden'; //don't allow scrolling
            document.body.scrollTop = document.documentElement.scrollTop = 0; //once again scroll to top for good measure
        }

        SetCountDowngeneral();
        }
        else{
            document.getElementById("cookie-banner").classList.add("failedcookiebanner");
            setTimeout(function() {
                document.getElementById("cookie-banner").classList.remove("failedcookiebanner");
            }, 500);
        }
    }

    //grey out color pickers and theme color for background
    if (!isNaN(parameter("atc"))) { //if animated background is enabled
        document.getElementById("animatedbackground").classList.remove("hidden"); //unhide background
        document.querySelector("meta[name=theme-color]").setAttribute("content", '#141414'); //sets the theme color to grey
        disablecolor(); //greys out color picker
    }
    else { //if animated background is disabled
        document.getElementById("animatedbackground").classList.add("hidden"); //hide background
        if (document.getElementById("clock") && document.getElementById("clock").style.display !== "none") { //if the clock exists and settings is not open
            document.querySelector("meta[name=theme-color]").setAttribute("content", window.getComputedStyle(document.getElementById("clock")).getPropertyValue("color")); //sets the theme color to the current foreground color
        }
        else if(parameter("schedule") !== "null" && parameter("schedule")){ //if using schedule instead of clock
            document.querySelector("meta[name=theme-color]").setAttribute("content", window.getComputedStyle(document.getElementById("schedule-currentClass")).getPropertyValue("background-color")); //sets the theme color to the current foreground color
        }
        else{ //should never be triggered(?) mostly a fallback
            document.querySelector("meta[name=theme-color]").setAttribute("content", '#8426ff'); //sets the theme color to Countdown Purple
        }
        enablecolor(); //un-greys color picker
    }


    //section of code that does the counting
    var x = setInterval(function () {

        if (document.getElementById("settings").classList.contains("hidden")) {
            document.body.scrollTop = document.documentElement.scrollTop = 0;
        } //if settings is closed we perpetually scroll to the top of the tab 

        updateoptions();

        if (getCookie("speed1")) { //if speed one has been chosen in the past and still has a cookie representing it
            document.getElementById("speed1").click(); //simulate a click on speed one to remember that choice
        }
        else if (getCookie("speed2")) { //see speed one
            document.getElementById("speed2").click(); //see line above
        }
        else if (getCookie("speed3")) { //see speed two
            document.getElementById("speed3").click(); //see line above
        }

        if (!isNaN(parameter("atc"))) {
            document.getElementById("clock").classList.remove("clock"); //remove colored normal clock
            document.getElementById("clock").classList.remove("clockslow"); //remove colored slow clock
            document.getElementById("clock").classList.remove("clockfast"); //remove colored fast clock
            document.getElementById("clock").classList.add("staticclock"); //add white only clock
            if (document.getElementById("settings").classList.contains("hidden")) { //if settings is hidden
                document.getElementById("animatedbackground").classList.remove("hidden"); //add animated background
                document.querySelector("meta[name=theme-color]").setAttribute("content", '#141414'); //greys theme color
                disablecolor(); //greys out color picker
            }
        }
        else {
            document.getElementById("clock").classList.add("clock"); //add back colored clock
            document.getElementById("clock").classList.remove("staticclock"); //remove white only clock
            document.getElementById("animatedbackground").classList.add("hidden"); //remove background
            if (document.getElementById("clock") && document.getElementById("clock").style.display !== "none") { //if the clock exists and settings is not opened
                document.querySelector("meta[name=theme-color]").setAttribute("content", window.getComputedStyle(document.getElementById("clock")).getPropertyValue("color")); //sets the theme color to the current foreground color
            }
            else if(parameter("schedule") !== "null" && parameter("schedule")){ //if using schedule instead of clock
                document.querySelector("meta[name=theme-color]").setAttribute("content", window.getComputedStyle(document.getElementById("schedule-currentClass")). getPropertyValue("background-color")); //sets the theme color to the current foreground color
            }
            else{ //should never be triggered(?) mostly a fallback
                document.querySelector("meta[name=theme-color]").setAttribute("content", '#8426ff'); //sets the theme color to Countdown Purple
            }
            
            enablecolor(); //un-greys color picker
        }

        document.getElementById("preloader").classList.add("hidden"); //hide loading screen


        var now = new Date().getTime();

        var distance = countDownDate - now;

        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);


        if(parameter("schedule") == "null"){ //will only trigger when there is no schedule active. schedule titles are handled with the cdschedule code.
            if (document.getElementById("countdowntitle").value != "") { //if the countdown has a title
                if (days > 0) { //if it's over 0 days, we use the days text with the title since there is a title
                    if(days == 1){
                        document.title = document.getElementById("countdowntitle").value + " in " + days + " day | Countdown";
                    }
                    else{
                        document.title = document.getElementById("countdowntitle").value + " in " + days + " days | Countdown";
                    }
                }
                else if (hours > 0) { //over 0 hours use hours with title
                    if(hours == 1){
                        document.title = document.getElementById("countdowntitle").value + " in " + hours + " hour | Countdown";
                    }
                    else{
                        document.title = document.getElementById("countdowntitle").value + " in " + hours + " hours | Countdown";
                    }
                }
                else if (minutes > 0) { //over 0 minutes use minutes with title
                    if(minutes == 1){
                        document.title = document.getElementById("countdowntitle").value + " in " + minutes + " minute | Countdown";
                    }
                    else{
                        document.title = document.getElementById("countdowntitle").value + " in " + minutes + " minutes | Countdown";
                    }
                }
                else if (seconds > 0) { //over 0 seconds use seconds with title
                    if(seconds == 1){
                        document.title = document.getElementById("countdowntitle").value + " in " + seconds + " second | Countdown";
                    }
                    else{
                        document.title = document.getElementById("countdowntitle").value + " in " + seconds + " seconds | Countdown";
                    }
                }
                else { //otherwise just use Countdown
                    document.title = "Countdown";
                }
            }
            else {
                if (days > 0) { //over 0 days no title
                    if(days == 1){
                        document.title = "Countdown for " + days + " day";
                    }
                    else{
                        document.title = "Countdown for " + days + " days";
                    }
                }
                else if (hours > 0) { //over 0 hours no title
                    if(hours == 1){
                        document.title = "Countdown for " + hours + " hour";
                    }
                    else{
                        document.title = "Countdown for " + hours + " hours";
                    }
                }
                else if (minutes > 0) { //over 0 minutes no title
                    if(minutes == 1){
                        document.title = "Countdown for " + minutes + " minute";
                    }
                    else{
                        document.title = "Countdown for " + minutes + " minutes";
                    }
                }
                else if (seconds > 0) { //over 0 seconds no title
                    if(seconds == 1){
                        document.title = "Countdown for " + seconds + " second";
                    }
                    else{
                        document.title = "Countdown for " + seconds + " seconds";
                    }
                } //since there are "else if" and not their own else, we dont have to worry about "seconds" triggering when it should be on "hours"- while the seconds is technically over 0, it will stop if it reaches hours and that's true
                else { //just countdown
                    document.title = "Countdown";
                }
            }
        }

        //only include
        if (getCookie("day")) {
            document.getElementById("clock").innerHTML = days + " days"; //no calc, just use days
        }
        else if (getCookie("hour")) {
            var hourcount = Math.floor(distance / 3600000); //figure out how many hours in that many milliseconds
            document.getElementById("clock").innerHTML = hourcount + " hours";
        }
        else if (getCookie("minute")) {
            var minutecount = Math.floor(distance / 60000); //milliseconds converted to days
            document.getElementById("clock").innerHTML = minutecount + " minutes";
        }
        else if (getCookie("second")) {
            var secondcount = Math.floor(distance / 1000); //milliseconds converted to seconds
            document.getElementById("clock").innerHTML = secondcount + " seconds";
        }
        else if (getCookie("millisecond")) {
            document.getElementById("clock").innerHTML = distance + " milliseconds"; //no calc, just use milliseconds
        }
        else if (getCookie("week")) {
            var weekcount = Math.floor(days / 7); //days / seven, weeks
            document.getElementById("clock").innerHTML = weekcount + " weeks";
        }
        else if (getCookie("lcdu")) { //label countdown units
            if (days > 0) {
                document.getElementById("clock").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s "; //same as title, change the text as needed depending on what's left
                document.getElementById("clock").style.fontSize = '75px';
            }
            else if (hours > 0) {
                document.getElementById("clock").innerHTML = hours + "h " + minutes + "m " + seconds + "s "; //only for hours, no more days
                document.getElementById("clock").style.fontSize = '100px';
            }
            else if (minutes > 0) {
                document.getElementById("clock").innerHTML = minutes + "m " + seconds + "s "; //only for minutes no more hours
                document.getElementById("clock").style.fontSize = '150px';
            }
            else {
                document.getElementById("clock").innerHTML = seconds + "s"; //just seconds
                document.getElementById("clock").style.fontSize = '175px';
            }
        }
        else { //not labeling or only including
            if (days > 0) {
                document.getElementById("clock").innerHTML = days + ":" + hours + ":" + minutes + ":" + seconds; //same as labeled just without labels
                document.getElementById("clock").style.fontSize = '75px';
            }
            else if (hours > 0) {
                document.getElementById("clock").innerHTML = hours + ":" + minutes + ":" + seconds; //only for hours no more days
                document.getElementById("clock").style.fontSize = '100px';
            }
            else if (minutes > 0) {
                document.getElementById("clock").innerHTML = minutes + ":" + seconds; //only for minutes no more hours
                document.getElementById("clock").style.fontSize = '150px';
            }
            else {
                document.getElementById("clock").innerHTML = seconds;
                document.getElementById("clock").style.fontSize = '175px'; //just seconds
            }
        }

        if(distance == 1000){
            //check if ending sound url input has value
            if(document.getElementById("audioLink").value !== ""){
                playAudio();
            }
        }

        if (distance < 0) { //if the timer is over
            clearInterval(x);
            document.getElementById("clock").remove();
            document.getElementById("countdowntitle").remove();
            document.getElementById("settings").display = "none";
            document.getElementById("innergear").classList.remove("fa-gears"); //remove clock, title, settings icon
            document.getElementById("innergear").classList.add("fa-xmark"); //add a button to close the countdown
            document.getElementById("gear").onclick = finishedcountdownend; //when said button is clicked go to the homepage

            document.getElementById("animatedbackground").style.opacity = "0"; //fade out the animated background (as it has a transition property for opacity)
            setTimeout(() => {
                document.getElementById("animatedbackground").remove(); //in one second when the fade is done, completely delete the background
            }, 1000);


            if (!getCookie('coce')) { //if disable confetti is not enabled, 
                startConfetti(); //START THE PARTY!!
            }
        }



    }, 1);

    function finishedcountdownend() {
        window.location.href = "http://countdown.michaeldors.com"; //used on the x mark for confetti, makes a new countdown
    }

    function updateoptions() { //updates the states of the toggle buttons in settings
        if (getCookie("memsav")) { //memory saver
            document.getElementById("memsav").classList.add("enabled");
            document.getElementById("memsav").classList.remove("disabled");
        }
        else {
            document.getElementById("memsav").classList.remove("enabled");
            document.getElementById("memsav").classList.add("disabled");
        }
        if (getCookie("coce")) { //disable confetti
            document.getElementById("coce").classList.add("enabled");
            document.getElementById("coce").classList.remove("disabled");
        }
        else {
            document.getElementById("coce").classList.remove("enabled");
            document.getElementById("coce").classList.add("disabled");
        }
        if (getCookie("lcdu")) { //label countdown units
            document.getElementById("lcdu").classList.add("enabled");
            document.getElementById("lcdu").classList.remove("disabled");
        }
        else {
            document.getElementById("lcdu").classList.remove("enabled");
            document.getElementById("lcdu").classList.add("disabled");
        }

        if (getCookie("second")) { //only include seconds
            document.getElementById("second").classList.add("enabled");
            document.getElementById("second").classList.remove("disabled");
        }
        else {
            document.getElementById("second").classList.remove("enabled");
            document.getElementById("second").classList.add("disabled");
        }

        if (getCookie("millisecond")) { //only include milliseconds
            document.getElementById("millisecond").classList.add("enabled");
            document.getElementById("millisecond").classList.remove("disabled");
        }
        else {
            document.getElementById("millisecond").classList.remove("enabled");
            document.getElementById("millisecond").classList.add("disabled");
        }

        if (getCookie("minute")) { //only include minutes
            document.getElementById("minute").classList.add("enabled");
            document.getElementById("minute").classList.remove("disabled");
        }
        else {
            document.getElementById("minute").classList.remove("enabled");
            document.getElementById("minute").classList.add("disabled");
        }

        if (getCookie("hour")) { //only include hours
            document.getElementById("hour").classList.add("enabled");
            document.getElementById("hour").classList.remove("disabled");
        }
        else {
            document.getElementById("hour").classList.remove("enabled");
            document.getElementById("hour").classList.add("disabled");
        }

        if (getCookie("day")) { //only include days
            document.getElementById("day").classList.add("enabled");
            document.getElementById("day").classList.remove("disabled");
        }
        else {
            document.getElementById("day").classList.remove("enabled");
            document.getElementById("day").classList.add("disabled");
        }

        if (getCookie("week")) { //only include weeks
            document.getElementById("week").classList.add("enabled");
            document.getElementById("week").classList.remove("disabled");
        }
        else {
            document.getElementById("week").classList.remove("enabled");
            document.getElementById("week").classList.add("disabled");
        }
    }




    function memsav() { //memory saver set or remove cookie
        if (getCookie('memsav')) {
            eraseCookie('memsav');
        }
        else {
            setCookie('memsav', 'true', '70');
        }
        updateoptions();
    }



    function coce() { //disable confetti set or remove cookie 
        if (getCookie('coce')) {
            eraseCookie('coce');
        }
        else {
            setCookie('coce', 'true', '70');
        }
        updateoptions();
    }


    function lcdu() { //label countdown units set or remove cookie
        if (getCookie('lcdu')) {
            eraseCookie('lcdu');
        }
        else {
            setCookie('lcdu', 'true', '70');
        }
        updateoptions();
    }


    function week() { //only include week set or remove cookie
        if (getCookie('week')) {
            eraseCookie('week');
        }
        else {
            setCookie('week', 'true', '70');
            eraseCookie('second'); //remove all other only includes
            eraseCookie('minute');
            eraseCookie('hour');
            eraseCookie('day');
            eraseCookie('millisecond');
        }
        updateoptions();
    }
    function day() { //only include day set or remove cookie
        if (getCookie('day')) {
            eraseCookie('day');
        }
        else {
            setCookie('day', 'true', '70');
            eraseCookie('second'); //remove all other only includes
            eraseCookie('minute');
            eraseCookie('week');
            eraseCookie('hour');
            eraseCookie('millisecond');
        }
        updateoptions();
    }
    function hour() { //only include hour set or remove cookie
        if (getCookie('hour')) {
            eraseCookie('hour');
        }
        else {
            setCookie('hour', 'true', '70');
            eraseCookie('second'); //remove all other only includes
            eraseCookie('day');
            eraseCookie('week');
            eraseCookie('minute');
            eraseCookie('millisecond');
        }
        updateoptions();
    }
    function minute() { //only include minute set or remove cookie
        if (getCookie('minute')) {
            eraseCookie('minute');
        }
        else {
            setCookie('minute', 'true', '70');
            eraseCookie('second'); //remove all other only includes
            eraseCookie('week');
            eraseCookie('day');
            eraseCookie('hour');
            eraseCookie('millisecond');
        }
        updateoptions();
    }
    function second() { //only include second set or remove cookie
        if (getCookie('second')) {
            eraseCookie('second');
        }
        else {
            setCookie('second', 'true', '70');
            eraseCookie('minute'); //remove all other only includes
            eraseCookie('day');
            eraseCookie('hour');
            eraseCookie('week');
            eraseCookie('millisecond');
        }
        updateoptions();
    }
    function millisecond() { //only include millisecond set or remove cookie
        if (getCookie('millisecond')) {
            eraseCookie('millisecond');
        }
        else {
            setCookie('millisecond', 'true', '70');
            eraseCookie('minute'); //remove all other only includes
            eraseCookie('day');
            eraseCookie('second');
            eraseCookie('hour');
            eraseCookie('week');
        }
        updateoptions();
    }
    function resetcookies() { //remove all saved cookies
        eraseCookie('memsav');
        eraseCookie('coce');
        eraseCookie('minute');
        eraseCookie('millisecond');
        eraseCookie('week');
        eraseCookie('second');
        eraseCookie('day');
        eraseCookie('hour');
        eraseCookie('cookiesAccepted');
        eraseCookie('lcdu');
        updateoptions(); //update classes of settings buttons

        document.getElementById("animatedbackground").style.display = "none"; //remove animated bg
        bgstring = "none"; //set the background var to none

        var css = document.querySelector(':root'); //access the CSS variables
        document.getElementById("color1").value = "#8426ff";
        document.getElementById("color2").value = "#3ab6ff";
        document.getElementById("color3").value = "#00ff5e";
        document.getElementById("color4").value = "#ff9900"; //reset all four color values
        css.style.setProperty('--one', "#8426ff");
        css.style.setProperty('--two', "#3ab6ff");
        css.style.setProperty('--three', "#00ff5e");
        css.style.setProperty('--four', "#ff9900"); //mirror that reset in the CSS variables
        css.style.setProperty('--typeface', "Fredoka One"); //reset typeface

        localStorage.removeItem('dashboardsaved'); //reset dashboard

        window.location.href = window.location.origin + window.location.pathname; //set URL

    }

    //date picker presets tab box
    const tabsBox = document.querySelector(".tabs-box"),
        allTabs = tabsBox.querySelectorAll(".tab"),
        arrowIcons = document.querySelectorAll(".icon i");
    let isDragging = false;
    const handleIcons = (scrollVal) => {
        let maxScrollableWidth = tabsBox.scrollWidth - tabsBox.clientWidth;
        arrowIcons[0].parentElement.style.display = scrollVal <= 0 ? "none" : "flex";
        arrowIcons[1].parentElement.style.display = maxScrollableWidth - scrollVal <= 1 ? "none" : "flex";
    }
    arrowIcons.forEach(icon => {
        icon.addEventListener("click", () => {
            // if clicked icon is left, reduce from tabsBox scrollLeft else add
            let scrollWidth = tabsBox.scrollLeft += icon.id === "left" ? -200 : 200;
            handleIcons(scrollWidth);
        });
    });

    const dragging = (e) => {
        if (!isDragging) return;
        tabsBox.classList.add("dragging");
        tabsBox.scrollLeft -= e.movementX;
        handleIcons(tabsBox.scrollLeft)
    }
    const dragStop = () => {
        isDragging = false;
        tabsBox.classList.remove("dragging");
    }
    tabsBox.addEventListener("mousedown", () => isDragging = true);
    tabsBox.addEventListener("mousemove", dragging);
    document.addEventListener("mouseup", dragStop);


    /*
    //presets tabbox
    const PresetstabsBox = document.querySelector(".presetstabs-box"),
        PresetsallTabs = tabsBox.querySelectorAll(".tab"),
        PresetsarrowIcons = document.querySelectorAll(".presetsicon i");
    let PresetsisDragging = false;
    const PresetshandleIcons = (scrollVal) => {
        let maxScrollableWidth = PresetstabsBox.scrollWidth - PresetstabsBox.clientWidth;
        PresetsarrowIcons[0].parentElement.style.display = scrollVal <= 0 ? "none" : "flex";
        PresetsarrowIcons[1].parentElement.style.display = maxScrollableWidth - scrollVal <= 1 ? "none" : "flex";
    }
    PresetsarrowIcons.forEach(icon => {
        icon.addEventListener("click", () => {
            // if clicked icon is left, reduce from tabsBox scrollLeft else add
            let scrollWidth = PresetstabsBox.scrollLeft += icon.id === "presetsleft" ? -300 : 300;
            PresetshandleIcons(scrollWidth);
        });
    });

    const Presetsdragging = (e) => {
        if (!PresetsisDragging) return;
        PresetstabsBox.classList.add("dragging");
        PresetstabsBox.scrollLeft -= e.movementX;
        PresetshandleIcons(tabsBox.scrollLeft)
    }
    const PresetsdragStop = () => {
        PresetsisDragging = false;
        PresetstabsBox.classList.remove("dragging");
    }
    PresetstabsBox.addEventListener("mousedown", () => isDragging = true);
    PresetstabsBox.addEventListener("mousemove", dragging);
    document.addEventListener("mouseup", dragStop);
    
    */


    const holidays = { // keys are formatted as month,week,day
        "0,2,1": "Martin Luther King, Jr. Day",
        "1,2,1": "President's Day",
        "2,1,0": "Daylight Savings Time Begins",
        "3,3,3": "Administrative Assistants Day",
        "4,1,0": "Mother's Day",
        "4,-1,1": "Memorial Day",
        "5,2,0": "Father's Day",
        "6,2,0": "Parents Day",
        "8,0,1": "Labor Day",
        "8,1,0": "Grandparents Day",
        "8,-1,0": "Gold Star Mothers Day",
        "9,1,1": "Columbus Day",
        "10,0,0": "Daylight Savings Time Ends",
        "10,3,4": "Thanksgiving Day"
    };
    function getDate(year, month, week, day) {
        const firstDay = 1;
        if (week < 0) {
            month++;
        }
        const date = new Date(year, month, (week * 7) + firstDay);
        if (day < date.getDay()) {
            day += 7;
        }
        date.setDate(date.getDate() - date.getDay() + day);
        return date;
    }

    function getDateString(year, month, week, day) {
        const date = getDate(year, month, week, day);
        let dateString = date.toLocaleDateString();

        return dateString;
    }

    function formatDate(userDate) {
        var dateArr = userDate.split('/');
        if (dateArr[0].length == 1) {
            dateArr[0] = '0' + dateArr[0];
        } else if (dateArr[1].length == 1) {
            dateArr[1] = '0' + dateArr[1];
        }
        userDate = dateArr[2] + "-" + dateArr[0] + "-" + dateArr[1];
        return userDate + 'T00:00';
    }

    //Date preset functions
    //See autopilot code for docs
    var now = new Date().getTime();
    var nextyear = new Date().getFullYear() + 1;
    var thisyear = new Date().getFullYear();

    function MES() { //MCA End of School
        document.querySelector(".datepicker").value = '2025-05-23T11:30';
        SetCountDowngeneral();
    }
    function EASTER() { //Easter
        var epoch = 2444238.5, elonge = 278.83354, elongp = 282.596403, eccent = .016718, sunsmax = 149598500, sunangsiz = .533128, mmlong = 64.975464, mmlongp = 349.383063, mlnode = 151.950429, minc = 5.145396, mecc = .0549, mangsiz = .5181, msmax = 384401, mparallax = .9507, synmonth = 29.53058868, lunatbase = 2423436, earthrad = 6378.16, PI = 3.141592653589793, epsilon = 1e-6; function sgn(x) { return x < 0 ? -1 : x > 0 ? 1 : 0 } function abs(x) { return x < 0 ? -x : x } function fixAngle(a) { return a - 360 * Math.floor(a / 360) } function toRad(d) { return d * (PI / 180) } function toDeg(d) { return d * (180 / PI) } function dsin(x) { return Math.sin(toRad(x)) } function dcos(x) { return Math.cos(toRad(x)) } function toJulianTime(date) { var year, month, day; year = date.getFullYear(); var m = (month = date.getMonth() + 1) > 2 ? month : month + 12, y = month > 2 ? year : year - 1, d = (day = date.getDate()) + date.getHours() / 24 + date.getMinutes() / 1440 + (date.getSeconds() + date.getMilliseconds() / 1e3) / 86400, b = isJulianDate(year, month, day) ? 0 : 2 - y / 100 + y / 100 / 4; return Math.floor(365.25 * (y + 4716) + Math.floor(30.6001 * (m + 1)) + d + b - 1524.5) } function isJulianDate(year, month, day) { if (year < 1582) return !0; if (year > 1582) return !1; if (month < 10) return !0; if (month > 10) return !1; if (day < 5) return !0; if (day > 14) return !1; throw "Any date in the range 10/5/1582 to 10/14/1582 is invalid!" } function jyear(td, yy, mm, dd) { var z, f, alpha, b, c, d, e; return f = (td += .5) - (z = Math.floor(td)), b = (z < 2299161 ? z : z + 1 + (alpha = Math.floor((z - 1867216.25) / 36524.25)) - Math.floor(alpha / 4)) + 1524, c = Math.floor((b - 122.1) / 365.25), d = Math.floor(365.25 * c), e = Math.floor((b - d) / 30.6001), { day: Math.floor(b - d - Math.floor(30.6001 * e) + f), month: Math.floor(e < 14 ? e - 1 : e - 13), year: Math.floor(mm > 2 ? c - 4716 : c - 4715) } } function jhms(j) { var ij; return j += .5, ij = Math.floor(86400 * (j - Math.floor(j)) + .5), { hour: Math.floor(ij / 3600), minute: Math.floor(ij / 60 % 60), second: Math.floor(ij % 60) } } function jwday(j) { return Math.floor(j + 1.5) % 7 } function meanphase(sdate, k) { var t, t2; return 2415020.75933 + synmonth * k + 1178e-7 * (t2 = (t = (sdate - 2415020) / 36525) * t) - 155e-9 * (t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2) } function truephase(k, phase) { var t, t2, t3, pt, m, mprime, f, apcor = !1; if (pt = 2415020.75933 + synmonth * (k += phase) + 1178e-7 * (t2 = (t = k / 1236.85) * t) - 155e-9 * (t3 = t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2), m = 359.2242 + 29.10535608 * k - 333e-7 * t2 - 347e-8 * t3, mprime = 306.0253 + 385.81691806 * k + .0107306 * t2 + 1236e-8 * t3, f = 21.2964 + 390.67050646 * k - .0016528 * t2 - 239e-8 * t3, phase < .01 || abs(phase - .5) < .01 ? (pt += (.1734 - 393e-6 * t) * dsin(m) + .0021 * dsin(2 * m) - .4068 * dsin(mprime) + .0161 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0104 * dsin(2 * f) - .0051 * dsin(m + mprime) - .0074 * dsin(m - mprime) + 4e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .001 * dsin(2 * f - mprime) + 5e-4 * dsin(m + 2 * mprime), apcor = !0) : (abs(phase - .25) < .01 || abs(phase - .75) < .01) && (pt += (.1721 - 4e-4 * t) * dsin(m) + .0021 * dsin(2 * m) - .628 * dsin(mprime) + .0089 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0079 * dsin(2 * f) - .0119 * dsin(m + mprime) - .0047 * dsin(m - mprime) + 3e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .0021 * dsin(2 * f - mprime) + 3e-4 * dsin(m + 2 * mprime) + 4e-4 * dsin(m - 2 * mprime) - 3e-4 * dsin(2 * m + mprime), pt += phase < .5 ? .0028 - 4e-4 * dcos(m) + 3e-4 * dcos(mprime) : 4e-4 * dcos(m) - .0028 - 3e-4 * dcos(mprime), apcor = !0), !apcor) throw "Error calculating moon phase!"; return pt } function phasehunt(sdate, phases) { var adate, k1, k2, nt1, nt2, yy, mm, dd, jyearResult = jyear(adate = sdate - 45, yy, mm, dd); for (yy = jyearResult.year, mm = jyearResult.month, dd = jyearResult.day, adate = nt1 = meanphase(adate, k1 = Math.floor(12.3685 * (yy + 1 / 12 * (mm - 1) - 1900))); nt2 = meanphase(adate += synmonth, k2 = k1 + 1), !(nt1 <= sdate && nt2 > sdate);)nt1 = nt2, k1 = k2; return phases[0] = truephase(k1, 0), phases[1] = truephase(k1, .25), phases[2] = truephase(k1, .5), phases[3] = truephase(k1, .75), phases[4] = truephase(k2, 0), phases } function kepler(m, ecc) { var e, delta; e = m = toRad(m); do { e -= (delta = e - ecc * Math.sin(e) - m) / (1 - ecc * Math.cos(e)) } while (abs(delta) > epsilon); return e } function getMoonPhase(julianDate) { var Day, N, M, Ec, Lambdasun, ml, MM, MN, Ev, Ae, MmP, mEc, lP, lPP, NP, y, x, MoonAge, MoonPhase, MoonDist, MoonDFrac, MoonAng, F, SunDist, SunAng; return N = fixAngle(360 / 365.2422 * (Day = julianDate - epoch)), Ec = kepler(M = fixAngle(N + elonge - elongp), eccent), Ec = Math.sqrt((1 + eccent) / (1 - eccent)) * Math.tan(Ec / 2), Lambdasun = fixAngle((Ec = 2 * toDeg(Math.atan(Ec))) + elongp), F = (1 + eccent * Math.cos(toRad(Ec))) / (1 - eccent * eccent), SunDist = sunsmax / F, SunAng = F * sunangsiz, ml = fixAngle(13.1763966 * Day + mmlong), MM = fixAngle(ml - .1114041 * Day - mmlongp), MN = fixAngle(mlnode - .0529539 * Day), MmP = MM + (Ev = 1.2739 * Math.sin(toRad(2 * (ml - Lambdasun) - MM))) - (Ae = .1858 * Math.sin(toRad(M))) - .37 * Math.sin(toRad(M)), lPP = (lP = ml + Ev + (mEc = 6.2886 * Math.sin(toRad(MmP))) - Ae + .214 * Math.sin(toRad(2 * MmP))) + .6583 * Math.sin(toRad(2 * (lP - Lambdasun))), NP = MN - .16 * Math.sin(toRad(M)), y = Math.sin(toRad(lPP - NP)) * Math.cos(toRad(minc)), x = Math.cos(toRad(lPP - NP)), toDeg(Math.atan2(y, x)), NP, toDeg(Math.asin(Math.sin(toRad(lPP - NP)) * Math.sin(toRad(minc)))), MoonAge = lPP - Lambdasun, MoonPhase = (1 - Math.cos(toRad(MoonAge))) / 2, MoonDist = msmax * (1 - mecc * mecc) / (1 + mecc * Math.cos(toRad(MmP + mEc))), MoonAng = mangsiz / (MoonDFrac = MoonDist / msmax), mparallax / MoonDFrac, { moonIllumination: MoonPhase, moonAgeInDays: synmonth * (fixAngle(MoonAge) / 360), distanceInKm: MoonDist, angularDiameterInDeg: MoonAng, distanceToSun: SunDist, sunAngularDiameter: SunAng, moonPhase: fixAngle(MoonAge) / 360 } } function getMoonInfo(date) { return null == date ? { moonPhase: 0, moonIllumination: 0, moonAgeInDays: 0, distanceInKm: 0, angularDiameterInDeg: 0, distanceToSun: 0, sunAngularDiameter: 0 } : getMoonPhase(toJulianTime(date)) } function getEaster(year) { var previousMoonInfo, moonInfo, fullMoon = new Date(year, 2, 21), gettingDarker = void 0; do { previousMoonInfo = getMoonInfo(fullMoon), fullMoon.setDate(fullMoon.getDate() + 1), moonInfo = getMoonInfo(fullMoon), void 0 === gettingDarker ? gettingDarker = moonInfo.moonIllumination < previousMoonInfo.moonIllumination : gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination && (gettingDarker = !1) } while (gettingDarker && moonInfo.moonIllumination < previousMoonInfo.moonIllumination || !gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination); for (fullMoon.setDate(fullMoon.getDate() - 1); 0 !== fullMoon.getDay();)fullMoon.setDate(fullMoon.getDate() + 1); return fullMoon.toISOString().split('T')[0] }

        var easterthisyear = new Date(getEaster(thisyear) + "T00:00");
        if (easterthisyear - now < 0) {
            document.querySelector(".datepicker").value = (getEaster(nextyear) + "T00:00");
        } else {
            document.querySelector(".datepicker").value = (getEaster(thisyear) + "T00:00");
        }
        SetCountDowngeneral();
    }
    function NYD() { //New Years Day
        var newyearsthisyear = new Date(thisyear + "-01-01T00:00");
        if (newyearsthisyear - now < 0) {
            document.querySelector(".datepicker").value = nextyear + '-01-01T00:00';
        } else {
            document.querySelector(".datepicker").value = thisyear + '-01-01T00:00';
        }
        SetCountDowngeneral();
    }
    function VD() { //Valentines Day
        var valentinesthisyear = new Date(thisyear + "-02-14T00:00");
        if (valentinesthisyear - now < 0) {
            document.querySelector(".datepicker").value = nextyear + '-02-14T00:00';
        } else {
            document.querySelector(".datepicker").value = thisyear + '-02-14T00:00';
        }
        SetCountDowngeneral();
    }

    function ID() { //Independence Day
        var independencethisyear = new Date(thisyear + "-07-04T00:00");
        if (independencethisyear - now < 0) {
            document.querySelector(".datepicker").value = nextyear + '-07-04T00:00';
        } else {
            document.querySelector(".datepicker").value = thisyear + '-07-04T00:00';
        }
        SetCountDowngeneral();
    }
    function H() { //Halloween
        var halloweenthisyear = new Date(thisyear + "-10-31T00:00");
        if (halloweenthisyear - now < 0) {
            document.querySelector(".datepicker").value = nextyear + '-10-31T00:00';
        } else {
            document.querySelector(".datepicker").value = thisyear + '-10-31T00:00';
        }
        SetCountDowngeneral();
    }
    function T() { //Thanksgiving
        var thanksgivingthisyear = new Date(formatDate(getDateString(thisyear, 10, 3, 4)));
        if (thanksgivingthisyear - now < 0) {
            document.querySelector(".datepicker").value = formatDate(getDateString(nextyear, 10, 3, 4));
        }
        else {
            document.querySelector(".datepicker").value = formatDate(getDateString(thisyear, 10, 3, 4));
        }
        SetCountDowngeneral();
    }
    function C() { //Christmas
        var christmasthisyear = new Date(thisyear + "-12-25T00:00");
        if (christmasthisyear - now < 0) {
            document.querySelector(".datepicker").value = nextyear + '-12-25T00:00';
        } else {
            document.querySelector(".datepicker").value = thisyear + '-12-25T00:00';
        }
        SetCountDowngeneral();
    }

        function autopilottab(){
            var now = new Date(); //getting the current date
            var nextyear = new Date().getFullYear() + 1; //setting up a next year variable
            var thisyear = new Date().getFullYear(); //setting up a this year variable

            //new years
            var newyearsthisyear = new Date(thisyear + "-01-01T00:00"); //setting up a this year variable for when new years day is in the current year
            if (newyearsthisyear - now < 0) { //if it's already passed
                newyearsday = new Date(nextyear + '-01-01T00:00'); //then set the countdown to new year's next year
            } else { //otherwise, if it's not passed yet
                newyearsday = new Date(thisyear + '-01-01T00:00'); //set the countdown to new year's this year
            }

            //valentines
            var valentinesthisyear = new Date(thisyear + "-02-14T00:00"); //see new years for docs
            if (valentinesthisyear - now < 0) {
                valentinessday = new Date(nextyear + '-02-14T00:00');
            } else {
                valentinessday = new Date(thisyear + '-02-14T00:00');
            }

            //easter
            var epoch = 2444238.5, elonge = 278.83354, elongp = 282.596403, eccent = .016718, sunsmax = 149598500, sunangsiz = .533128, mmlong = 64.975464, mmlongp = 349.383063, mlnode = 151.950429, minc = 5.145396, mecc = .0549, mangsiz = .5181, msmax = 384401, mparallax = .9507, synmonth = 29.53058868, lunatbase = 2423436, earthrad = 6378.16, PI = 3.141592653589793, epsilon = 1e-6; function sgn(x) { return x < 0 ? -1 : x > 0 ? 1 : 0 } function abs(x) { return x < 0 ? -x : x } function fixAngle(a) { return a - 360 * Math.floor(a / 360) } function toRad(d) { return d * (PI / 180) } function toDeg(d) { return d * (180 / PI) } function dsin(x) { return Math.sin(toRad(x)) } function dcos(x) { return Math.cos(toRad(x)) } function toJulianTime(date) { var year, month, day; year = date.getFullYear(); var m = (month = date.getMonth() + 1) > 2 ? month : month + 12, y = month > 2 ? year : year - 1, d = (day = date.getDate()) + date.getHours() / 24 + date.getMinutes() / 1440 + (date.getSeconds() + date.getMilliseconds() / 1e3) / 86400, b = isJulianDate(year, month, day) ? 0 : 2 - y / 100 + y / 100 / 4; return Math.floor(365.25 * (y + 4716) + Math.floor(30.6001 * (m + 1)) + d + b - 1524.5) } function isJulianDate(year, month, day) { if (year < 1582) return !0; if (year > 1582) return !1; if (month < 10) return !0; if (month > 10) return !1; if (day < 5) return !0; if (day > 14) return !1; throw "Any date in the range 10/5/1582 to 10/14/1582 is invalid!" } function jyear(td, yy, mm, dd) { var z, f, alpha, b, c, d, e; return f = (td += .5) - (z = Math.floor(td)), b = (z < 2299161 ? z : z + 1 + (alpha = Math.floor((z - 1867216.25) / 36524.25)) - Math.floor(alpha / 4)) + 1524, c = Math.floor((b - 122.1) / 365.25), d = Math.floor(365.25 * c), e = Math.floor((b - d) / 30.6001), { day: Math.floor(b - d - Math.floor(30.6001 * e) + f), month: Math.floor(e < 14 ? e - 1 : e - 13), year: Math.floor(mm > 2 ? c - 4716 : c - 4715) } } function jhms(j) { var ij; return j += .5, ij = Math.floor(86400 * (j - Math.floor(j)) + .5), { hour: Math.floor(ij / 3600), minute: Math.floor(ij / 60 % 60), second: Math.floor(ij % 60) } } function jwday(j) { return Math.floor(j + 1.5) % 7 } function meanphase(sdate, k) { var t, t2; return 2415020.75933 + synmonth * k + 1178e-7 * (t2 = (t = (sdate - 2415020) / 36525) * t) - 155e-9 * (t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2) } function truephase(k, phase) { var t, t2, t3, pt, m, mprime, f, apcor = !1; if (pt = 2415020.75933 + synmonth * (k += phase) + 1178e-7 * (t2 = (t = k / 1236.85) * t) - 155e-9 * (t3 = t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2), m = 359.2242 + 29.10535608 * k - 333e-7 * t2 - 347e-8 * t3, mprime = 306.0253 + 385.81691806 * k + .0107306 * t2 + 1236e-8 * t3, f = 21.2964 + 390.67050646 * k - .0016528 * t2 - 239e-8 * t3, phase < .01 || abs(phase - .5) < .01 ? (pt += (.1734 - 393e-6 * t) * dsin(m) + .0021 * dsin(2 * m) - .4068 * dsin(mprime) + .0161 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0104 * dsin(2 * f) - .0051 * dsin(m + mprime) - .0074 * dsin(m - mprime) + 4e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .001 * dsin(2 * f - mprime) + 5e-4 * dsin(m + 2 * mprime), apcor = !0) : (abs(phase - .25) < .01 || abs(phase - .75) < .01) && (pt += (.1721 - 4e-4 * t) * dsin(m) + .0021 * dsin(2 * m) - .628 * dsin(mprime) + .0089 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0079 * dsin(2 * f) - .0119 * dsin(m + mprime) - .0047 * dsin(m - mprime) + 3e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .0021 * dsin(2 * f - mprime) + 3e-4 * dsin(m + 2 * mprime) + 4e-4 * dsin(m - 2 * mprime) - 3e-4 * dsin(2 * m + mprime), pt += phase < .5 ? .0028 - 4e-4 * dcos(m) + 3e-4 * dcos(mprime) : 4e-4 * dcos(m) - .0028 - 3e-4 * dcos(mprime), apcor = !0), !apcor) throw "Error calculating moon phase!"; return pt } function phasehunt(sdate, phases) { var adate, k1, k2, nt1, nt2, yy, mm, dd, jyearResult = jyear(adate = sdate - 45, yy, mm, dd); for (yy = jyearResult.year, mm = jyearResult.month, dd = jyearResult.day, adate = nt1 = meanphase(adate, k1 = Math.floor(12.3685 * (yy + 1 / 12 * (mm - 1) - 1900))); nt2 = meanphase(adate += synmonth, k2 = k1 + 1), !(nt1 <= sdate && nt2 > sdate);)nt1 = nt2, k1 = k2; return phases[0] = truephase(k1, 0), phases[1] = truephase(k1, .25), phases[2] = truephase(k1, .5), phases[3] = truephase(k1, .75), phases[4] = truephase(k2, 0), phases } function kepler(m, ecc) { var e, delta; e = m = toRad(m); do { e -= (delta = e - ecc * Math.sin(e) - m) / (1 - ecc * Math.cos(e)) } while (abs(delta) > epsilon); return e } function getMoonPhase(julianDate) { var Day, N, M, Ec, Lambdasun, ml, MM, MN, Ev, Ae, MmP, mEc, lP, lPP, NP, y, x, MoonAge, MoonPhase, MoonDist, MoonDFrac, MoonAng, F, SunDist, SunAng; return N = fixAngle(360 / 365.2422 * (Day = julianDate - epoch)), Ec = kepler(M = fixAngle(N + elonge - elongp), eccent), Ec = Math.sqrt((1 + eccent) / (1 - eccent)) * Math.tan(Ec / 2), Lambdasun = fixAngle((Ec = 2 * toDeg(Math.atan(Ec))) + elongp), F = (1 + eccent * Math.cos(toRad(Ec))) / (1 - eccent * eccent), SunDist = sunsmax / F, SunAng = F * sunangsiz, ml = fixAngle(13.1763966 * Day + mmlong), MM = fixAngle(ml - .1114041 * Day - mmlongp), MN = fixAngle(mlnode - .0529539 * Day), MmP = MM + (Ev = 1.2739 * Math.sin(toRad(2 * (ml - Lambdasun) - MM))) - (Ae = .1858 * Math.sin(toRad(M))) - .37 * Math.sin(toRad(M)), lPP = (lP = ml + Ev + (mEc = 6.2886 * Math.sin(toRad(MmP))) - Ae + .214 * Math.sin(toRad(2 * MmP))) + .6583 * Math.sin(toRad(2 * (lP - Lambdasun))), NP = MN - .16 * Math.sin(toRad(M)), y = Math.sin(toRad(lPP - NP)) * Math.cos(toRad(minc)), x = Math.cos(toRad(lPP - NP)), toDeg(Math.atan2(y, x)), NP, toDeg(Math.asin(Math.sin(toRad(lPP - NP)) * Math.sin(toRad(minc)))), MoonAge = lPP - Lambdasun, MoonPhase = (1 - Math.cos(toRad(MoonAge))) / 2, MoonDist = msmax * (1 - mecc * mecc) / (1 + mecc * Math.cos(toRad(MmP + mEc))), MoonAng = mangsiz / (MoonDFrac = MoonDist / msmax), mparallax / MoonDFrac, { moonIllumination: MoonPhase, moonAgeInDays: synmonth * (fixAngle(MoonAge) / 360), distanceInKm: MoonDist, angularDiameterInDeg: MoonAng, distanceToSun: SunDist, sunAngularDiameter: SunAng, moonPhase: fixAngle(MoonAge) / 360 } } function getMoonInfo(date) { return null == date ? { moonPhase: 0, moonIllumination: 0, moonAgeInDays: 0, distanceInKm: 0, angularDiameterInDeg: 0, distanceToSun: 0, sunAngularDiameter: 0 } : getMoonPhase(toJulianTime(date)) } function getEaster(year) { var previousMoonInfo, moonInfo, fullMoon = new Date(year, 2, 21), gettingDarker = void 0; do { previousMoonInfo = getMoonInfo(fullMoon), fullMoon.setDate(fullMoon.getDate() + 1), moonInfo = getMoonInfo(fullMoon), void 0 === gettingDarker ? gettingDarker = moonInfo.moonIllumination < previousMoonInfo.moonIllumination : gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination && (gettingDarker = !1) } while (gettingDarker && moonInfo.moonIllumination < previousMoonInfo.moonIllumination || !gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination); for (fullMoon.setDate(fullMoon.getDate() - 1); 0 !== fullMoon.getDay();)fullMoon.setDate(fullMoon.getDate() + 1); return fullMoon.toISOString().split('T')[0] }
            //the above line calculates the moon's path to figure out when Easter is

            var easterthisyear = new Date(getEaster(thisyear) + "T00:00"); //see new years for docs, except it's calculating easter as it's not a set date
            if (easterthisyear - now < 0) {
                easterday = new Date(getEaster(nextyear) + "T00:00");
            } else {
                easterday = new Date(getEaster(thisyear) + "T00:00");
            }

            //independence
            var independencethisyear = new Date(thisyear + "-07-04T00:00"); //see new years for docs
            if (independencethisyear - now < 0) {
                independenceday = new Date(nextyear + '-07-04T00:00');
            } else {
                independenceday = new Date(thisyear + '-07-04T00:00');
            }

            //halloween
            var halloweenthisyear = new Date(thisyear + "-10-31T00:00"); //see new years for docs
            if (halloweenthisyear - now < 0) {
                halloweenday = new Date(nextyear + '-10-31T00:00');
            } else {
                halloweenday = new Date(thisyear + '-10-31T00:00');
            }

            //thanksgiving
            var thanksgivingthisyear = new Date(formatDate(getDateString(thisyear, 10, 3, 4))); //10th month, 3rd week, 4th day (thursday)
            if (thanksgivingthisyear - now < 0) { //see new years for docs
                thanksgivingday = new Date(formatDate(getDateString(nextyear, 10, 3, 4)));
            }
            else {
                thanksgivingday = new Date(formatDate(getDateString(thisyear, 10, 3, 4)));
            }

            //christmas
            var christmasthisyear = new Date(thisyear + "-12-25T00:00"); //see new years for doce
            if (christmasthisyear - now < 0) {
                christmasday = new Date(nextyear + '-12-25T00:00');
            } else {
                christmasday = new Date(thisyear + '-12-25T00:00');
            }


            // List of holiday dates
            const holidays = [
                {
                    name: 'newyear',
                    date: newyearsday
                },
                {
                    name: 'valentines',
                    date: valentinessday
                },
                {
                    name: 'easter',
                    date: easterday
                },
                {
                    name: 'independence',
                    date: independenceday
                },
                {
                    name: 'halloween',
                    date: halloweenday
                },
                {
                    name: 'thanksgiving',
                    date: thanksgivingday
                },
                {
                    name: 'christmas',
                    date: christmasday
                }
            ];

            // Now that all the holidays are in a list and we've calculated when they occur next, it'll find which is coming up the soonest
            var nextHoliday = holidays.reduce(function (closest, holiday) {
                var timeDiff = holiday.date.getTime() - now.getTime();
                return timeDiff > 0 && timeDiff < (closest.date.getTime() - now.getTime()) ? holiday : closest;
            }, holidays[0]);


            switch (nextHoliday.name) {
                case 'newyear':
                    NYD(); //run the NYD function to actually set the date and such to NYD
                    break;
                case 'valentines': //see NYD for docs
                    VD();
                    break;
                case 'easter': //see NYD for docs
                    EASTER();
                    break;
                case 'independence': //see NYD for docs
                    ID();
                    break;
                case 'halloween': //see NYD for docs
                    H();
                    break;
                case 'thanksgiving': //see NYD for docs
                    T();
                    break;
                case 'christmas': //see NYD for docs
                    C();
                    break;
                default:
                    // handle cases where nextHoliday.name doesn't match any of the above
                    console.error('Unexpected holiday name:', nextHoliday.name);
            }
        }


    function MESPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/mcaeoy.svg)";

        //set date
        MES();

        //set title
        document.getElementById("cdtitlesettings").value = "MCA End of School";
        setcountdowntitle("settings");
    }
    function NYDPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/nyd.svg)";

        //set date
        NYD();

        //set title
        document.getElementById("cdtitlesettings").value = "New Year's Day";
        setcountdowntitle("settings");
    }
    function VDPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/bonsai.svg)";

        //set date
        VD();

        //set title
        document.getElementById("cdtitlesettings").value = "Valentine's Day";
        setcountdowntitle("settings");

        SetCountDowngeneral();
    }
    function EASTERPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/wildflowers.svg)";

        //set date
        EASTER();

        //set title
        document.getElementById("cdtitlesettings").value = "Easter";
       setcountdowntitle("settings"); 
    }
    function IDPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/id.svg)";

        //set date
        ID();

        //set title
        document.getElementById("cdtitlesettings").value = "Independence Day";
       setcountdowntitle("settings"); 
    }
    function HPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/halloween.svg)";
        
        //set date
        H();

        //set title
        document.getElementById("cdtitlesettings").value = "Halloween";
       setcountdowntitle("settings"); 
    }
    function TPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/thanksgiving.svg)";
        
        //set date
        T();

        //set title
        document.getElementById("cdtitlesettings").value = "Thanksgiving";
       setcountdowntitle("settings"); 
    }
    function CPreset(){
        //set background
        document.getElementById("body").style.backgroundImage="url(Backgrounds/Presets/christmas.svg)";

        //set date
        C();
        
        //set title
        document.getElementById("cdtitlesettings").value = "Christmas";
       setcountdowntitle("settings"); 
    }


    //Link copy buttom
    function copyinputtextlink() {
        let linkinputfield = document.getElementById("linkinput"); //Get the value of the link input box
        navigator.clipboard.writeText(linkinputfield.value); //Save that value to clipboard
    }

    //Scrolling controls tabs box too
    const container = document.getElementById("tabs-box");
    container.addEventListener("wheel", function (e) {

        if (e.deltaY > 0) {
            container.scrollLeft += 200;
            e.preventDefault();
        }
        else {
            container.scrollLeft -= 200;
            e.preventDefault();
        }
    });

        //Scrolling controls presets tabs box too
        //const presetscontainer = document.getElementById("presetstabs-box");
    //presetscontainer.addEventListener("wheel", function (e) {

        //if (e.deltaY > 0) {
        //    presetscontainer.scrollLeft += 200;
        //    e.preventDefault();
       // }
       // else {
      //      presetscontainer.scrollLeft -= 200;
      //      e.preventDefault();
      //  }
   // });

    //Function to enable color when a background is disabled
    function enablecolor() {
        document.getElementById("color1").classList.add("colorpicker");
        document.getElementById("color1").classList.remove("disabledcolorpicker");
        document.getElementById("color2").classList.add("colorpicker");
        document.getElementById("color2").classList.remove("disabledcolorpicker");
        document.getElementById("color3").classList.add("colorpicker");
        document.getElementById("color3").classList.remove("disabledcolorpicker");
        document.getElementById("color4").classList.add("colorpicker");
        document.getElementById("color4").classList.remove("disabledcolorpicker");
    }

    //Function to disable color when a background is enabled
    function disablecolor() {
        document.getElementById("color1").classList.remove("colorpicker");
        document.getElementById("color1").classList.add("disabledcolorpicker");
        document.getElementById("color2").classList.remove("colorpicker");
        document.getElementById("color2").classList.add("disabledcolorpicker");
        document.getElementById("color3").classList.remove("colorpicker");
        document.getElementById("color3").classList.add("disabledcolorpicker");
        document.getElementById("color4").classList.remove("colorpicker");
        document.getElementById("color4").classList.add("disabledcolorpicker");
    }

    function setbg(bgint, method) {
        if ((method != "auto") && (parameter("atc") == bgint)) {
            //the selected background is already the set background - turn off background
            enablecolor();
            document.getElementById("animatedbackground").style.opacity = "0"; //fade out the animated background (as it has a transition property for opacity)
            setTimeout(() => {
                document.getElementById("animatedbackground").style.display = "none"; //in one second when the fade is done, hide the background
            }, 1000);
            bgstring = "none";

            bggotdisabled = "true";
        }
        else if ((parameter("atc") == "none") && bgint != "none") {
            //param is none, but the selected background is not - turn on and set background
            disablecolor();
            //grey out color pickers and theme color for background
            document.getElementById("animatedbackground").classList.remove("hidden"); //unhide background
            document.getElementById("animatedbackground").style.zIndex = "-3"; //set the bg to be behind all other elements
            document.getElementById("animatedbackground").style.position = "fixed"; //fixed position so it stays even when scrolled
            document.getElementById("bg1").src = "Backgrounds/enhancedbackground_" + bgint + ".png";
            document.getElementById("bg2").src = "Backgrounds/enhancedbackground_" + bgint + ".png";
            bgstring = bgint;
            document.getElementById("animatedbackground").style.display = "";
            document.getElementById("animatedbackground").style.opacity = "1"; //fade out the animated background (as it has a transition property for opacity)

            bggotdisabled = "false";
        }
        else if ((parameter("atc") != "none") && (document.getElementById("bg1").src != "Backgrounds/enhancedbackground_" + bgint + ".png")) {
            //parameter is not none, but the selected and set backgrounds are different - change the bg w/o turning on or off
            document.getElementById("bg1").src = "Backgrounds/enhancedbackground_" + bgint + ".png";
            document.getElementById("bg2").src = "Backgrounds/enhancedbackground_" + bgint + ".png";
            bgstring = bgint;

            bggotdisabled = "false";
        }
        else {
            //catchall for errors too but primarily for and should only be pinged when not using atc
            enablecolor();
            document.getElementById("animatedbackground").style.opacity = "0"; //fade out the animated background (as it has a transition property for opacity)
            setTimeout(() => {
                document.getElementById("animatedbackground").style.display = ""; //in one second when the fade is done, hide delete the background
            }, 1000);
            
            bgstring = "none";
            bggotdisabled = "true";
        }

        //for loop that adds selected and normal bgbutton classes

        const buttons = document.querySelectorAll('.bgbtnn');

        for (const button of buttons) {
            const buttonId = button.id.slice(5); // remove bgbtn get number

            if (bggotdisabled == "true" && button.classList.contains("selectedbackgroundpicker")) {
                button.classList.remove('selectedbackgroundpicker');
                button.classList.add('backgroundpicker');
            }
            else {
                if (bgint == buttonId) {
                    button.classList.add('selectedbackgroundpicker');
                    button.classList.remove('backgroundpicker');
                }
                else {
                    button.classList.remove('selectedbackgroundpicker');
                    button.classList.add('backgroundpicker');
                }
            }
        }

        SetCountDowngeneral();

    }


    //QR code generation
    function makeQR() {
        const qrcode = document.getElementById("qrcode");
        const qrCanvas = qrcode.getElementsByTagName('canvas')[0];  // Get the canvas element

        if (qrCanvas) {
            qrCanvas.getContext('2d').clearRect(0, 0, qrCanvas.width, qrCanvas.height); // Clear only if canvas exists
        }

        document.getElementById('qrcode').innerHTML = '';

        function imgQR(qrCanvas, centerImage, factor) {
            var h = qrCanvas.height;
            var cs = h * factor;
            var co = (h - cs) / 2;
            var ctx = qrCanvas.getContext("2d");
            ctx.drawImage(centerImage, 0, 0, centerImage.width, centerImage.height, co, co, cs, cs);
        }
        const icon = new Image();
        icon.onload = function generateQR() {
            var qrcode = new QRCode(document.getElementById("qrcode"), {
                text: "https://michaeldors.com/mcacountdown/timer.html?date=" + parameter('date') + "?colorone=" + parameter('colorone') + "?colortwo=" + parameter('colortwo') + "?colorthree=" + parameter('colorthree') + "?colorfour=" + parameter('colorfour'),
                width: 150,
                height: 150,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
            imgQR(qrcode._oDrawing._elCanvas, this, 0.3)
        }
        icon.src = 'icon.ico';

    }

    //Shareable QR Code download
    function downloadQR() {
        var imageContainer = document.getElementById('qrcode');
        var imageElement = imageContainer.querySelector('img');

        var imageData = imageElement.src;

        var downloadLink = document.createElement('a');
        downloadLink.href = imageData;
        downloadLink.download = 'mdcountdownqrcode.png';

        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
    }

    //Autopilot animation
    const autocircle = document.querySelector('.autopilot-countdown-circle .progressbarr');
    let autocountdown = 10000;
    let autocountdownInterval;

    function updateCountdown() {
        const length = autocircle.getTotalLength();
        if(autocircle){
            const offset = length - (length * (10000 + autocountdown) / 10000);
            autocircle.style.strokeDashoffset = offset;
            if (autocountdown < 1) {
                document.getElementById("autopilotpopup").style.opacity = "0";
                document.getElementById("autopilotpopupmobile").style.opacity = "0";

                autocircle.remove();
            }
            if (autocountdown === "-0") {
                clearInterval(autocountdownInterval);
                document.getElementById("autopilotpopup").remove();
                document.getElementById("autopilotpopupmobile").remove();
            }
            autocountdown -= 10;
        }else{
            clearInterval(autocountdownInterval);
        }
    }

    if(autocircle){
    autocountdownInterval = setInterval(updateCountdown, 10);
    }

    //close the autopilot popup
    function closeautopanel() {
        document.getElementById("autopilotpopup").style.opacity = "0";
        document.getElementById("autopilotpopupmobile").style.opacity = "0";
    }


    //set Fredoka font
    function FontFredoka(method) {
        document.querySelector(':root').style.setProperty('--typeface', 'Fredoka One');
        document.querySelector(':root').style.setProperty('--comptypeface', 'Dosis');

        document.getElementById("fredoka").classList.add("selectedfontpicker");
        document.getElementById("poppins").classList.remove("selectedfontpicker");
        document.getElementById("poppins").classList.add("fontpicker");
        document.getElementById("dmserif").classList.remove("selectedfontpicker");
        document.getElementById("dmserif").classList.add("fontpicker");
        document.getElementById("orbitron").classList.remove("selectedfontpicker");
        document.getElementById("orbitron").classList.add("fontpicker");

        document.getElementById("schedule-classTitle").style.textTransform = "initial";

        if (method == "Manual") {
            SetCountDowngeneral();
        }
    }

    //set Poppins font
    function FontPoppins(method) {
        document.querySelector(':root').style.setProperty('--typeface', 'Poppins');
        document.querySelector(':root').style.setProperty('--comptypeface', 'Poppins');

        document.getElementById("fredoka").classList.remove("selectedfontpicker");
        document.getElementById("fredoka").classList.add("fontpicker");
        document.getElementById("poppins").classList.add("selectedfontpicker");
        document.getElementById("dmserif").classList.remove("selectedfontpicker");
        document.getElementById("dmserif").classList.add("fontpicker");
        document.getElementById("orbitron").classList.remove("selectedfontpicker");
        document.getElementById("orbitron").classList.add("fontpicker");

        document.getElementById("schedule-classTitle").style.textTransform = "initial";

        if (method == "Manual") {
            SetCountDowngeneral();
        }
    }

    //set DM Serif font, previously Yeseva
    function FontDMSerif(method) {
        document.querySelector(':root').style.setProperty('--typeface', 'DM Serif Display');
        document.querySelector(':root').style.setProperty('--comptypeface', 'Castoro');

        document.getElementById("fredoka").classList.remove("selectedfontpicker");
        document.getElementById("fredoka").classList.add("fontpicker");
        document.getElementById("poppins").classList.remove("selectedfontpicker");
        document.getElementById("poppins").classList.add("fontpicker");
        document.getElementById("dmserif").classList.add("selectedfontpicker");
        document.getElementById("orbitron").classList.remove("selectedfontpicker");
        document.getElementById("orbitron").classList.add("fontpicker");

        document.getElementById("schedule-classTitle").style.textTransform = "initial";

        if (method == "Manual") {
            SetCountDowngeneral();
        }
    }

    //set Orbitron font
    function FontOrbitron(method) {
        document.querySelector(':root').style.setProperty('--typeface', 'Orbitron');
        document.querySelector(':root').style.setProperty('--comptypeface', 'Ubuntu');

        document.getElementById("fredoka").classList.remove("selectedfontpicker");
        document.getElementById("fredoka").classList.add("fontpicker");
        document.getElementById("poppins").classList.remove("selectedfontpicker");
        document.getElementById("poppins").classList.add("fontpicker");
        document.getElementById("dmserif").classList.remove("selectedfontpicker");
        document.getElementById("dmserif").classList.add("fontpicker");
        document.getElementById("orbitron").classList.add("selectedfontpicker");

        document.getElementById("schedule-classTitle").style.textTransform = "uppercase";

        if (method == "Manual") {
            SetCountDowngeneral();
        }
    }


    document.getElementById("body").addEventListener("mousemove", function (event) {
        // Get element dimensions
        const rect = document.getElementById("countdowntitle").getBoundingClientRect();

        // Calculate distance from mouse to center of element
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const distanceX = Math.abs(event.clientX - centerX);
        const distanceY = Math.abs(event.clientY - centerY);
        const distance = Math.sqrt(distanceX ** 2 + distanceY ** 2);

        // Normalize distance to 0-1 based on threshold (300px)
        const opacity = Math.max(0, 1 - distance / 300) / 3;

        // Set element opacity
        document.getElementById("countdowntitle").style.border = `1px solid rgba(255, 255, 255, ${opacity})`;
    });

    //set countdown title
    function setcountdowntitle(from) {
        var fronttitlepicker = document.getElementById("countdowntitle");
        var settingstitlepicker = document.getElementById("cdtitlesettings");
        if (from == 'settings') { //if it's set from settings, set the front one
            fronttitlepicker.value = settingstitlepicker.value;
        }

        if (from == 'front') { //if it's set from the front, set from settings
            settingstitlepicker.value = fronttitlepicker.value;
        }

        SetCountDowngeneral();
    }

    //generate a random color when adding colors to the text animation
    function getRandomColor() {
  var letters = '0123456789ABCDEF';
  var color = '#';
  for (var i = 0; i < 6; i++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}

    let colorPickerCount = 4;

    //create a new color picker
function addColorPicker() {
    if (colorPickerCount < 8) {
        colorPickerCount++;
        const container = document.getElementById('colorPickersContainer');
        const newColorPickerContainer = document.createElement('div');
        newColorPickerContainer.className = 'colorpicker-container';

        const newColorPicker = document.createElement('input');
        newColorPicker.className = 'colorpicker';
        newColorPicker.id = `color${colorPickerCount}`;
        newColorPicker.type = 'color';
        newColorPicker.value = getRandomColor();
        newColorPicker.onblur = SetCountDowngeneral;

        const removeButton = document.createElement('div');
        removeButton.className = 'remove-button';
        removeButton.innerHTML = '-';
        removeButton.onclick = function() { removeColorPicker(removeButton); };

        newColorPickerContainer.appendChild(newColorPicker);
        newColorPickerContainer.appendChild(removeButton);

        container.appendChild(newColorPickerContainer);

        if(document.querySelector(".colorpickerlinebreak")){
        document.querySelector(".colorpickerlinebreak").remove();
        }
        const colorpickersocontainer = document.getElementById('colorPickersContainer');
        if (colorpickersocontainer.children.length > 4) {
            const newBR = document.createElement('br');
            newBR.className = 'colorpickerlinebreak';
            colorpickersocontainer.insertBefore(newBR, colorpickersocontainer.children[4]);
        }
        
        if(colorpickersocontainer.children.length > 8){
            document.querySelector(".clradd").classList.add("clraddoff");
        }
        else{
            document.querySelector(".clradd").classList.remove("clraddoff");
        }
        newColorPicker.focus();
        newColorPicker.click();


        adjustHeightOfColorPickerContainer();
        SetCountDowngeneral();
    }
}

//remove the color picker that the clicked remove button is appended to
function removeColorPicker(button) {
    const container = button.parentElement;
    container.style.transform = 'scale(0)';
    setTimeout(() => {
    container.remove();
    colorPickerCount--;
    const colorpickersocontainer = document.getElementById('colorPickersContainer');
    if(document.querySelector(".colorpickerlinebreak")){
        document.querySelector(".colorpickerlinebreak").remove();
    }
        if (colorpickersocontainer.children.length > 4) {
            const newBR = document.createElement('br');
            newBR.className = 'colorpickerlinebreak';
            colorpickersocontainer.insertBefore(newBR, colorpickersocontainer.children[4]);
        }

        if(colorpickersocontainer.children.length > 8){
            document.querySelector(".clradd").classList.add("clraddoff");
        }
        else{
            document.querySelector(".clradd").classList.remove("clraddoff");
        }
    
    adjustHeightOfColorPickerContainer();
    SetCountDowngeneral();
    }, 300);
}

//adjusts the height of color picker container. is called after any changes
function adjustHeightOfColorPickerContainer() {
    const container = document.getElementById('colorPickersContainer');
    const children = container.children;
    let numRows = Math.ceil(children.length / 4); // Calculate the number of rows (1 or 2)
    let maxHeight = 0;

    // Find the maximum height of a single color picker (assuming uniform height for simplicity)
    for (let i = 0; i < children.length; i++) {
        if (children[i].offsetHeight > maxHeight) {
            maxHeight = children[i].offsetHeight;
        }
    }

    // Adjust numRows calculation to avoid extra spacing when exactly 8 pickers are present
    if (children.length === 9) {
        numRows = 2; // Explicitly set to 2 rows when there are exactly 8 children
    }

    // Set the container height based on the number of rows and the maximum height of a single row
    container.style.height = `${numRows * maxHeight}px`;
}

//Countdown Schedule 
let schedule_events = [];
        let schedule_exceptions = {};
        let schedule_editingEvent = null;
        let schedule_editingExceptionDay = null;

        function schedule_encodeSchedule() {
            return btoa(JSON.stringify({ schedule_events, schedule_exceptions }));
        }

        function schedule_decodeSchedule(encoded) {
            try {
                const decoded = JSON.parse(atob(encoded));
                return {
                    schedule_events: decoded.schedule_events || [],
                    schedule_exceptions: decoded.schedule_exceptions || {}
                };
            } catch (e) {
                console.error('Failed to decode schedule:', e);
                return { schedule_events: [], schedule_exceptions: {} };
            }
        }

        function schedule_updateURL() {
            const encoded = schedule_encodeSchedule();
            history.replaceState(null, '', `?schedule=${encoded}`);
        }

        function schedule_resetAll(){
            history.replaceState(null, '', `?schedule=null`);
            schedule_loadScheduleFromURL();
        }

        function schedule_loadScheduleFromURL() {
            const encodedSchedule = parameter('schedule');
            if (encodedSchedule && encodedSchedule !== "null") {
                const decoded = schedule_decodeSchedule(encodedSchedule);
                schedule_events = decoded.schedule_events;
                schedule_exceptions = decoded.schedule_exceptions;
                schedule_updateEventList();
                schedule_updateExceptionList();
            }
        }

        function schedule_addOrUpdateEvent() {
            const title = document.getElementById('schedule-eventTitle').value;
            const startTime = document.getElementById('schedule-startTime').value;
            const endTime = document.getElementById('schedule-endTime').value;

            if (title && startTime && endTime) {
                const newEvent = { title, startTime, endTime };
                if (schedule_editingEvent) {
                    // Update existing event
                    if (schedule_editingExceptionDay !== null) {
                        const index = schedule_exceptions[schedule_editingExceptionDay].findIndex(e => e === schedule_editingEvent);
                        if (index !== -1) {
                            schedule_exceptions[schedule_editingExceptionDay][index] = newEvent;
                        }
                    } else {
                        const index = schedule_events.indexOf(schedule_editingEvent);
                        if (index !== -1) {
                            schedule_events[index] = newEvent;
                        }
                    }
                } else {
                    // Add new event
                    if (schedule_editingExceptionDay !== null) {
                        if (!schedule_exceptions[schedule_editingExceptionDay]) {
                            schedule_exceptions[schedule_editingExceptionDay] = [];
                        }
                        schedule_exceptions[schedule_editingExceptionDay].push(newEvent);
                    } else {
                        schedule_events.push(newEvent);
                    }
                }

                if (schedule_editingExceptionDay !== null) {
                    schedule_exceptions[schedule_editingExceptionDay].sort((a, b) => a.startTime.localeCompare(b.startTime));
                } else {
                    schedule_events.sort((a, b) => a.startTime.localeCompare(b.startTime));
                }

                schedule_updateEventList();
                schedule_updateExceptionList();
                schedule_resetForm();
                schedule_updateURL();
                schedule_updateScheduleViewer();
            }
        }

        function schedule_editEvent(event, isException = false, day = null) {
            schedule_editingEvent = event;
            schedule_editingExceptionDay = isException ? day : null;
            document.getElementById('schedule-eventTitle').value = event.title;
            document.getElementById('schedule-startTime').value = event.startTime;
            document.getElementById('schedule-endTime').value = event.endTime;
            document.getElementById('schedule-addOrUpdateEventBtn').innerHTML = '<i class="fa-solid fa-check-circle"></i> Update Event';
		document.getElementById("schedule-eventTitle").scrollIntoView();
        }

        function schedule_removeEvent(index, isException = false, day = null) {
            if (isException) {
                schedule_exceptions[day].splice(index, 1);
                if (schedule_exceptions[day].length === 0) {
                    delete schedule_exceptions[day];
                }
            } else {
                schedule_events.splice(index, 1);
            }
            schedule_updateEventList();
            schedule_updateExceptionList();
            schedule_updateURL();
            schedule_updateScheduleViewer();
        }

        function schedule_addExceptionDay() {
            const day = document.getElementById('schedule-exceptionDay').value;
            if (!schedule_exceptions[day]) {
                schedule_exceptions[day] = [];
            }
            schedule_updateExceptionList();
            schedule_updateURL();
            schedule_updateScheduleViewer();
        }

        function schedule_removeExceptionDay(day) {
            delete schedule_exceptions[day];
            schedule_updateExceptionList();
            schedule_updateURL();
            schedule_updateScheduleViewer();
        }

        function schedule_updateEventList() {
            const eventList = document.getElementById('schedule-eventList');
            eventList.innerHTML = '';
            schedule_events.forEach((event, index) => {
                const li = document.createElement('li');
                li.className = 'schedule-event-item';
                li.innerHTML = `
                    <h1>${event.title}</h1><br>
                    <p>Start: ${schedule_formatTime(event.startTime)}<br>
                    End: ${schedule_formatTime(event.endTime)}<br></p>
                    <a onclick="schedule_editEvent(schedule_events[${index}])"><i class="fa-solid fa-pencil"></i> Edit</a>
                    <a class="warning" onclick="schedule_removeEvent(${index})"><i class="fa-solid fa-trash"></i> Remove</a>
                    <br>
                    <br>
                `;
                eventList.appendChild(li);
            });
        }

        function schedule_updateExceptionList() {
            const exceptionList = document.getElementById('schedule-exceptionList');
            exceptionList.innerHTML = '';
            for (const [day, dayEvents] of Object.entries(schedule_exceptions)) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'schedule-exception-day';
                const dayName = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][day];
                dayDiv.innerHTML = `
                    <button class="schedule-collapsible" onclick="schedule_toggleCollapsible(this)">${dayName}                         
		        <a onclick="schedule_editEvent(null, true, '${day}')">Add Event to ${dayName}</a>
                        <a class="warning" onclick="schedule_removeExceptionDay('${day}')"><i class="fa-solid fa-trash"></i></a>
		    </button>
                    <div class="schedule-content">
                        <br>
                        <br>
                        <ul style="list-style-type:none; margin:0; padding:0;">
                            ${dayEvents.map((event, index) => `
                                <li class="schedule-exception-item">
                                    <h1>${event.title}</h1><br>
                                    <p>Start: ${schedule_formatTime(event.startTime)}<br>
                                    End: ${schedule_formatTime(event.endTime)}<br></p>
                                    <a onclick="schedule_editEvent(schedule_exceptions['${day}'][${index}], true, '${day}')"><i class="fa-solid fa-pencil"></i> Edit</a>
                                    <a class="warning" onclick="schedule_removeEvent(${index}, true, '${day}')"> <i class="fa-solid fa-trash"></i> Remove</a>
                                    <br>
                                    <br>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
                exceptionList.appendChild(dayDiv);
            }
        }

        function schedule_resetForm() {
            document.getElementById('schedule-eventTitle').value = '';
            document.getElementById('schedule-startTime').value = '';
            document.getElementById('schedule-endTime').value = '';
            document.getElementById('schedule-addOrUpdateEventBtn').innerHTML = '<i class="fa-solid fa-plus-circle"></i> Add Event';
            schedule_editingEvent = null;
            schedule_editingExceptionDay = null;
        }

        function schedule_getScheduleForDay(date) {
            const dayOfWeek = date.getDay().toString();
            return schedule_exceptions[dayOfWeek] || schedule_events;
        }

        function schedule_formatTime(time) {
            const [hours, minutes] = time.split(':');
            const hour = parseInt(hours, 10);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const formattedHour = hour % 12 || 12;
            return `${formattedHour}:${minutes} ${ampm}`;
        }

        function schedule_updateScheduleViewer() {
            const now = new Date();
            const currentSchedule = schedule_getScheduleForDay(now);
            
            if (currentSchedule.length === 0) {
                schedule_showTomorrowSchedule();
                return;
            }

            let currentEvent = null;
            let upcomingEvents = [];

            for (let i = 0; i < currentSchedule.length; i++) {
                const event = currentSchedule[i];
                const [startHours, startMinutes] = event.startTime.split(':');
                const [endHours, endMinutes] = event.endTime.split(':');
                const startTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), startHours, startMinutes);
                const endTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), endHours, endMinutes);

                if (now >= startTime && now < endTime) {
                    currentEvent = { ...event, startTime, endTime };
                    upcomingEvents = currentSchedule.slice(i + 1);
                    break;
                } else if (now < startTime) {
                    currentEvent = { ...event, startTime, endTime, isUpcoming: true };
                    upcomingEvents = currentSchedule.slice(i + 1);
                    break;
                }
            }

            if (currentEvent) {
                document.getElementById('schedule-classTitle').textContent = currentEvent.title;
                if (currentEvent.isUpcoming) {
                    const timeUntilStart = currentEvent.startTime - now;
                    const minutesUntilStart = Math.floor(timeUntilStart / 60000);
                    const secondsUntilStart = Math.floor((timeUntilStart % 60000) / 1000);
                    document.getElementById('schedule-timeRemaining').textContent = `${minutesUntilStart}:${secondsUntilStart.toString().padStart(2, '0')}`;
                    document.getElementById('schedule-remainingText').textContent = 'starting';
                    document.getElementById('schedule-progress').style.width = '0%';
                    document.title = "Countdown Schedule Starting Soon";
                } else {
                    const remainingTime = currentEvent.endTime - now;
                    const totalDuration = currentEvent.endTime - currentEvent.startTime;
                    const progress = 100 - (remainingTime / totalDuration * 100);
                    document.getElementById('schedule-progress').style.width = `${progress}%`;

                    const minutes = Math.floor(remainingTime / 60000);
                    const seconds = Math.floor((remainingTime % 60000) / 1000);
                    document.getElementById('schedule-timeRemaining').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    document.getElementById('schedule-remainingText').textContent = 'remaining';
		    document.title = currentEvent.title + " | " + Math.round(remainingTime/60000) + " mins remaining";
                }
            } else {
                schedule_showTomorrowSchedule();
                return;
            }

            const upcomingClassesEl = document.getElementById('schedule-upcomingClasses');
            upcomingClassesEl.innerHTML = '';
            upcomingEvents.forEach(event => {
                const [startHours, startMinutes] = event.startTime.split(':');
                const startTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), startHours, startMinutes);
                const timeUntilStart = startTime - now;
                const minutesUntilStart = Math.floor(timeUntilStart / 60000);
                const upcomingEl = document.createElement('div');
                upcomingEl.className = 'schedule-upcoming-class';
                upcomingEl.innerHTML = `
                    <div class="schedule-upcoming-class-title">${event.title}</div>
                    <div class="schedule-upcoming-class-time">
                        <div><i class="fa-regular fa-clock"></i> In ${minutesUntilStart} min</div>
                        <div><i class="fa-regular fa-calendar"></i> ${schedule_formatTime(event.startTime)} - ${schedule_formatTime(event.endTime)}</div>
                    </div>
                `;
                upcomingClassesEl.appendChild(upcomingEl);
            });
        }

        function schedule_showTomorrowSchedule() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            const tomorrowSchedule = schedule_getScheduleForDay(tomorrow);

            if (tomorrowSchedule.length === 0) {
                document.getElementById('schedule-classTitle').innerHTML = '<i class="fa-solid fa-calendar-check"></i> Enjoy your day!<p>There are no events on your schedule- enjoy the free time!</p>';
                document.getElementById('schedule-timeRemaining').textContent = '';
                document.getElementById('schedule-remainingText').textContent = '';
                document.getElementById('schedule-progress').style.width = '0%';
                document.getElementById('schedule-upcomingClasses').innerHTML = '';
                return;
            }

            const firstEvent = tomorrowSchedule[0];
            const [startHours, startMinutes] = firstEvent.startTime.split(':');
            const startTime = new Date(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate(), startHours, startMinutes);
            const timeUntilStart = startTime - new Date();
            const hoursUntilStart = Math.floor(timeUntilStart / 3600000);
            const minutesUntilStart = Math.floor((timeUntilStart % 3600000) / 60000);

            document.getElementById('schedule-classTitle').textContent = `${firstEvent.title}`;
            document.getElementById('schedule-timeRemaining').textContent = `${hoursUntilStart}:${minutesUntilStart.toString().padStart(2, '0')}`;
            document.getElementById('schedule-remainingText').textContent = 'starting';
            document.getElementById('schedule-progress').style.width = '0%';

            const upcomingClassesEl = document.getElementById('schedule-upcomingClasses');
            tomorrowSchedule.forEach(event => {
                const upcomingEl = document.createElement('div');
                upcomingEl.className = 'schedule-upcoming-class';
                upcomingEl.innerHTML = `
                    <div class="schedule-upcoming-class-title">${event.title}</div>
                    <div class="schedule-upcoming-class-time">
                        <div>${schedule_formatTime(event.startTime)} - ${schedule_formatTime(event.endTime)}</div>
                    </div>
                `;
                upcomingClassesEl.appendChild(upcomingEl);
            });
        }

        function schedule_toggleCollapsible(button) {
            button.classList.toggle("active");
            var content = button.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        }

        document.getElementById('schedule-addOrUpdateEventBtn').addEventListener('click', schedule_addOrUpdateEvent);
        document.getElementById('schedule-addExceptionBtn').addEventListener('click', schedule_addExceptionDay);

        // Load schedule from URL when the page loads
        window.addEventListener('load', () => {
            schedule_loadScheduleFromURL();
            schedule_updateScheduleViewer();
            setInterval(schedule_updateScheduleViewer, 1000);
        });


        //ending sound

        let player;

function playAudio() {
    const link = document.getElementById('audioLink').value;
    const playerContainer = document.getElementById('playerContainer');
    playerContainer.innerHTML = '';

    if (link.includes('youtube.com') || link.includes('youtu.be')) {
        playYouTube(link);
    } else if (link.includes('soundcloud.com')) {
        playSoundCloud(link);
    } else {
        playDirectAudio(link);
    }
}

function playYouTube(link) {
    const videoId = extractYouTubeId(link);
    if (!videoId) {
        alert('Invalid YouTube URL');
        return;
    }

    const iframe = document.createElement('iframe');
    iframe.width = "0";
    iframe.height = "0";
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
    iframe.allow = "autoplay";
    document.getElementById('playerContainer').appendChild(iframe);
}

function extractYouTubeId(url) {
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    const match = url.match(regExp);
    return (match && match[2].length === 11) ? match[2] : null;
}

function playSoundCloud(link) {
    const iframe = document.createElement('iframe');
    iframe.width = "0";
    iframe.height = "0";
    iframe.src = `https://w.soundcloud.com/player/?url=${encodeURIComponent(link)}&auto_play=true`;
    document.getElementById('playerContainer').appendChild(iframe);
}

function playDirectAudio(link) {
    const audio = document.createElement('audio');
    audio.src = link;
    audio.style.display = 'none';
    audio.autoplay = true;
    document.getElementById('playerContainer').appendChild(audio);
}

function savetodash() {
    const url = window.location.href; // Get the current page URL
    const urlObj = new URL(url);
    title = urlObj.searchParams.get('title') || '';
    // If no title found in URL, use the date as a fallback
    if (!title) {
        const dateStr = urlObj.searchParams.get('date') || '';
        if (dateStr) {
            const date = new Date(dateStr);
            const options = { year: '2-digit', month: '2-digit', day: '2-digit' };
            title = date.toLocaleDateString('en-US', options);
            }
        }

    // Get the existing links from the cookie
    const savedLinks = localStorage.getItem("dashboardsaved");
    let links = savedLinks ? JSON.parse(savedLinks) : [];

    // Add the new link
    links.push({ url, title: title || '' });

    // Save the updated links back to the cookie
    localStorage.setItem('dashboardsaved', JSON.stringify(links), 70);

    window.location.href = "https://michaeldors.com/mcacountdown/countdowndashboard.html";
}

function magictitle(){
    if(parameter("schedule") !== "null" && parameter("schedule")){
        document.getElementById("countdowntitle").value = "Schedule";
        document.getElementById("magictitle").classList.add("magictitle-success");
        setTimeout(function() {
            document.getElementById("magictitle").classList.remove("magictitle-success");
        }, 500);
    }
    else{
            var now = new Date(); //getting the current date
            var nextyear = new Date().getFullYear() + 1; //setting up a next year variable
            var thisyear = new Date().getFullYear(); //setting up a this year variable

            //new years
            var newyearsthisyear = new Date(thisyear + "-01-01T00:00"); //setting up a this year variable for when new years day is in the current year
            if (newyearsthisyear - now < 0) { //if it's already passed
                newyearsday = new Date(nextyear + '-01-01T00:00'); //then set the countdown to new year's next year
            } else { //otherwise, if it's not passed yet
                newyearsday = new Date(thisyear + '-01-01T00:00'); //set the countdown to new year's this year
            }

            //valentines
            var valentinesthisyear = new Date(thisyear + "-02-14T00:00"); //see new years for docs
            if (valentinesthisyear - now < 0) {
                valentinessday = new Date(nextyear + '-02-14T00:00');
            } else {
                valentinessday = new Date(thisyear + '-02-14T00:00');
            }

            //easter
            var epoch = 2444238.5, elonge = 278.83354, elongp = 282.596403, eccent = .016718, sunsmax = 149598500, sunangsiz = .533128, mmlong = 64.975464, mmlongp = 349.383063, mlnode = 151.950429, minc = 5.145396, mecc = .0549, mangsiz = .5181, msmax = 384401, mparallax = .9507, synmonth = 29.53058868, lunatbase = 2423436, earthrad = 6378.16, PI = 3.141592653589793, epsilon = 1e-6; function sgn(x) { return x < 0 ? -1 : x > 0 ? 1 : 0 } function abs(x) { return x < 0 ? -x : x } function fixAngle(a) { return a - 360 * Math.floor(a / 360) } function toRad(d) { return d * (PI / 180) } function toDeg(d) { return d * (180 / PI) } function dsin(x) { return Math.sin(toRad(x)) } function dcos(x) { return Math.cos(toRad(x)) } function toJulianTime(date) { var year, month, day; year = date.getFullYear(); var m = (month = date.getMonth() + 1) > 2 ? month : month + 12, y = month > 2 ? year : year - 1, d = (day = date.getDate()) + date.getHours() / 24 + date.getMinutes() / 1440 + (date.getSeconds() + date.getMilliseconds() / 1e3) / 86400, b = isJulianDate(year, month, day) ? 0 : 2 - y / 100 + y / 100 / 4; return Math.floor(365.25 * (y + 4716) + Math.floor(30.6001 * (m + 1)) + d + b - 1524.5) } function isJulianDate(year, month, day) { if (year < 1582) return !0; if (year > 1582) return !1; if (month < 10) return !0; if (month > 10) return !1; if (day < 5) return !0; if (day > 14) return !1; throw "Any date in the range 10/5/1582 to 10/14/1582 is invalid!" } function jyear(td, yy, mm, dd) { var z, f, alpha, b, c, d, e; return f = (td += .5) - (z = Math.floor(td)), b = (z < 2299161 ? z : z + 1 + (alpha = Math.floor((z - 1867216.25) / 36524.25)) - Math.floor(alpha / 4)) + 1524, c = Math.floor((b - 122.1) / 365.25), d = Math.floor(365.25 * c), e = Math.floor((b - d) / 30.6001), { day: Math.floor(b - d - Math.floor(30.6001 * e) + f), month: Math.floor(e < 14 ? e - 1 : e - 13), year: Math.floor(mm > 2 ? c - 4716 : c - 4715) } } function jhms(j) { var ij; return j += .5, ij = Math.floor(86400 * (j - Math.floor(j)) + .5), { hour: Math.floor(ij / 3600), minute: Math.floor(ij / 60 % 60), second: Math.floor(ij % 60) } } function jwday(j) { return Math.floor(j + 1.5) % 7 } function meanphase(sdate, k) { var t, t2; return 2415020.75933 + synmonth * k + 1178e-7 * (t2 = (t = (sdate - 2415020) / 36525) * t) - 155e-9 * (t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2) } function truephase(k, phase) { var t, t2, t3, pt, m, mprime, f, apcor = !1; if (pt = 2415020.75933 + synmonth * (k += phase) + 1178e-7 * (t2 = (t = k / 1236.85) * t) - 155e-9 * (t3 = t2 * t) + 33e-5 * dsin(166.56 + 132.87 * t - .009173 * t2), m = 359.2242 + 29.10535608 * k - 333e-7 * t2 - 347e-8 * t3, mprime = 306.0253 + 385.81691806 * k + .0107306 * t2 + 1236e-8 * t3, f = 21.2964 + 390.67050646 * k - .0016528 * t2 - 239e-8 * t3, phase < .01 || abs(phase - .5) < .01 ? (pt += (.1734 - 393e-6 * t) * dsin(m) + .0021 * dsin(2 * m) - .4068 * dsin(mprime) + .0161 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0104 * dsin(2 * f) - .0051 * dsin(m + mprime) - .0074 * dsin(m - mprime) + 4e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .001 * dsin(2 * f - mprime) + 5e-4 * dsin(m + 2 * mprime), apcor = !0) : (abs(phase - .25) < .01 || abs(phase - .75) < .01) && (pt += (.1721 - 4e-4 * t) * dsin(m) + .0021 * dsin(2 * m) - .628 * dsin(mprime) + .0089 * dsin(2 * mprime) - 4e-4 * dsin(3 * mprime) + .0079 * dsin(2 * f) - .0119 * dsin(m + mprime) - .0047 * dsin(m - mprime) + 3e-4 * dsin(2 * f + m) - 4e-4 * dsin(2 * f - m) - 6e-4 * dsin(2 * f + mprime) + .0021 * dsin(2 * f - mprime) + 3e-4 * dsin(m + 2 * mprime) + 4e-4 * dsin(m - 2 * mprime) - 3e-4 * dsin(2 * m + mprime), pt += phase < .5 ? .0028 - 4e-4 * dcos(m) + 3e-4 * dcos(mprime) : 4e-4 * dcos(m) - .0028 - 3e-4 * dcos(mprime), apcor = !0), !apcor) throw "Error calculating moon phase!"; return pt } function phasehunt(sdate, phases) { var adate, k1, k2, nt1, nt2, yy, mm, dd, jyearResult = jyear(adate = sdate - 45, yy, mm, dd); for (yy = jyearResult.year, mm = jyearResult.month, dd = jyearResult.day, adate = nt1 = meanphase(adate, k1 = Math.floor(12.3685 * (yy + 1 / 12 * (mm - 1) - 1900))); nt2 = meanphase(adate += synmonth, k2 = k1 + 1), !(nt1 <= sdate && nt2 > sdate);)nt1 = nt2, k1 = k2; return phases[0] = truephase(k1, 0), phases[1] = truephase(k1, .25), phases[2] = truephase(k1, .5), phases[3] = truephase(k1, .75), phases[4] = truephase(k2, 0), phases } function kepler(m, ecc) { var e, delta; e = m = toRad(m); do { e -= (delta = e - ecc * Math.sin(e) - m) / (1 - ecc * Math.cos(e)) } while (abs(delta) > epsilon); return e } function getMoonPhase(julianDate) { var Day, N, M, Ec, Lambdasun, ml, MM, MN, Ev, Ae, MmP, mEc, lP, lPP, NP, y, x, MoonAge, MoonPhase, MoonDist, MoonDFrac, MoonAng, F, SunDist, SunAng; return N = fixAngle(360 / 365.2422 * (Day = julianDate - epoch)), Ec = kepler(M = fixAngle(N + elonge - elongp), eccent), Ec = Math.sqrt((1 + eccent) / (1 - eccent)) * Math.tan(Ec / 2), Lambdasun = fixAngle((Ec = 2 * toDeg(Math.atan(Ec))) + elongp), F = (1 + eccent * Math.cos(toRad(Ec))) / (1 - eccent * eccent), SunDist = sunsmax / F, SunAng = F * sunangsiz, ml = fixAngle(13.1763966 * Day + mmlong), MM = fixAngle(ml - .1114041 * Day - mmlongp), MN = fixAngle(mlnode - .0529539 * Day), MmP = MM + (Ev = 1.2739 * Math.sin(toRad(2 * (ml - Lambdasun) - MM))) - (Ae = .1858 * Math.sin(toRad(M))) - .37 * Math.sin(toRad(M)), lPP = (lP = ml + Ev + (mEc = 6.2886 * Math.sin(toRad(MmP))) - Ae + .214 * Math.sin(toRad(2 * MmP))) + .6583 * Math.sin(toRad(2 * (lP - Lambdasun))), NP = MN - .16 * Math.sin(toRad(M)), y = Math.sin(toRad(lPP - NP)) * Math.cos(toRad(minc)), x = Math.cos(toRad(lPP - NP)), toDeg(Math.atan2(y, x)), NP, toDeg(Math.asin(Math.sin(toRad(lPP - NP)) * Math.sin(toRad(minc)))), MoonAge = lPP - Lambdasun, MoonPhase = (1 - Math.cos(toRad(MoonAge))) / 2, MoonDist = msmax * (1 - mecc * mecc) / (1 + mecc * Math.cos(toRad(MmP + mEc))), MoonAng = mangsiz / (MoonDFrac = MoonDist / msmax), mparallax / MoonDFrac, { moonIllumination: MoonPhase, moonAgeInDays: synmonth * (fixAngle(MoonAge) / 360), distanceInKm: MoonDist, angularDiameterInDeg: MoonAng, distanceToSun: SunDist, sunAngularDiameter: SunAng, moonPhase: fixAngle(MoonAge) / 360 } } function getMoonInfo(date) { return null == date ? { moonPhase: 0, moonIllumination: 0, moonAgeInDays: 0, distanceInKm: 0, angularDiameterInDeg: 0, distanceToSun: 0, sunAngularDiameter: 0 } : getMoonPhase(toJulianTime(date)) } function getEaster(year) { var previousMoonInfo, moonInfo, fullMoon = new Date(year, 2, 21), gettingDarker = void 0; do { previousMoonInfo = getMoonInfo(fullMoon), fullMoon.setDate(fullMoon.getDate() + 1), moonInfo = getMoonInfo(fullMoon), void 0 === gettingDarker ? gettingDarker = moonInfo.moonIllumination < previousMoonInfo.moonIllumination : gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination && (gettingDarker = !1) } while (gettingDarker && moonInfo.moonIllumination < previousMoonInfo.moonIllumination || !gettingDarker && moonInfo.moonIllumination > previousMoonInfo.moonIllumination); for (fullMoon.setDate(fullMoon.getDate() - 1); 0 !== fullMoon.getDay();)fullMoon.setDate(fullMoon.getDate() + 1); return fullMoon.toISOString().split('T')[0] }
            //the above line calculates the moon's path to figure out when Easter is

            var easterthisyear = new Date(getEaster(thisyear) + "T00:00"); //see new years for docs, except it's calculating easter as it's not a set date
            if (easterthisyear - now < 0) {
                easterday = new Date(getEaster(nextyear) + "T00:00");
            } else {
                easterday = new Date(getEaster(thisyear) + "T00:00");
            }

            //independence
            var independencethisyear = new Date(thisyear + "-07-04T00:00"); //see new years for docs
            if (independencethisyear - now < 0) {
                independenceday = new Date(nextyear + '-07-04T00:00');
            } else {
                independenceday = new Date(thisyear + '-07-04T00:00');
            }

            //halloween
            var halloweenthisyear = new Date(thisyear + "-10-31T00:00"); //see new years for docs
            if (halloweenthisyear - now < 0) {
                halloweenday = new Date(nextyear + '-10-31T00:00');
            } else {
                halloweenday = new Date(thisyear + '-10-31T00:00');
            }

            //thanksgiving
            var thanksgivingthisyear = new Date(formatDate(getDateString(thisyear, 10, 3, 4))); //10th month, 3rd week, 4th day (thursday)
            if (thanksgivingthisyear - now < 0) { //see new years for docs
                thanksgivingday = new Date(formatDate(getDateString(nextyear, 10, 3, 4)));
            }
            else {
                thanksgivingday = new Date(formatDate(getDateString(thisyear, 10, 3, 4)));
            }

            //christmas
            var christmasthisyear = new Date(thisyear + "-12-25T00:00"); //see new years for doce
            if (christmasthisyear - now < 0) {
                christmasday = new Date(nextyear + '-12-25T00:00');
            } else {
                christmasday = new Date(thisyear + '-12-25T00:00');
            }


            // List of holiday dates
            const holidays = [
                {
                    name: 'newyear',
                    date: newyearsday
                },
                {
                    name: 'valentines',
                    date: valentinessday
                },
                {
                    name: 'easter',
                    date: easterday
                },
                {
                    name: 'independence',
                    date: independenceday
                },
                {
                    name: 'halloween',
                    date: halloweenday
                },
                {
                    name: 'thanksgiving',
                    date: thanksgivingday
                },
                {
                    name: 'christmas',
                    date: christmasday
                }
            ];

            // Now that all the holidays are in a list, we'll find the holiday that matches the current datepicker input value
            var selectedDate = new Date(document.querySelector(".datepicker").value);
            var matchingHoliday = holidays.find(function (holiday) {
                return holiday.date.toDateString() === selectedDate.toDateString();
            }) || { name: 'none', date: null }; // Default to none if no match is found


            switch (matchingHoliday.name) {
                case 'newyear':
                document.getElementById("countdowntitle").value = "New Year's Day";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'valentines': //see NYD for docs
                document.getElementById("countdowntitle").value = "Valentine's Day";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'easter': //see NYD for docs
                document.getElementById("countdowntitle").value = "Easter";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'independence': //see NYD for docs
                document.getElementById("countdowntitle").value = "Independence Day";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'halloween': //see NYD for docs
                document.getElementById("countdowntitle").value = "Halloween";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'thanksgiving': //see NYD for docs
                document.getElementById("countdowntitle").value = "Thanksgiving";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front"); 
                    break;
                case 'christmas': //see NYD for docs
                document.getElementById("countdowntitle").value = "Christmas";
                document.getElementById("magictitle").classList.add("magictitle-success");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-success");
                    }, 500);
                setcountdowntitle("front");
                    break;
                default:
                    // handle cases where nextHoliday.name doesn't match any of the above
                    console.error('Magic Title did not find a matching holiday.');
                    document.getElementById("magictitle").classList.add("magictitle-failed");
                    setTimeout(function() {
                        document.getElementById("magictitle").classList.remove("magictitle-failed");
                    }, 500);
            }
        }
    
    }

</script>
